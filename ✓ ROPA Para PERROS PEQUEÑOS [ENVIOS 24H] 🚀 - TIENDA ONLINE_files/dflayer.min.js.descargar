(()=>{var Lr=Object.defineProperty,Rr=Object.defineProperties;var Ir=Object.getOwnPropertyDescriptors;var Hs=Object.getOwnPropertySymbols;var Dr=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable;var Os=(i,e,t)=>e in i?Lr(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,U=(i,e)=>{for(var t in e||(e={}))Dr.call(e,t)&&Os(i,t,e[t]);if(Hs)for(var t of Hs(e))Hr.call(e,t)&&Os(i,t,e[t]);return i},ye=(i,e)=>Rr(i,Ir(e));var I=(i,e,t)=>new Promise((s,n)=>{var r=l=>{try{a(t.next(l))}catch(d){n(d)}},o=l=>{try{a(t.throw(l))}catch(d){n(d)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(r,o);a((t=t.apply(i,e)).next())});var ht=i=>typeof i=="function"?i:function(){return i},Or=typeof self!="undefined"?self:null,ct=typeof window!="undefined"?window:null,dt=Or||ct||dt,Mr="2.0.0",we={connecting:0,open:1,closing:2,closed:3},Nr=1e4,Ur=1e3,re={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Te={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Ii={longpoll:"longpoll",websocket:"websocket"},Fr={complete:4},Rt=class{constructor(i,e,t,s){this.channel=i,this.event=e,this.payload=t||function(){return{}},this.receivedResp=null,this.timeout=s,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(i){this.timeout=i,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(i,e){return this.hasReceived(i)&&e(this.receivedResp.response),this.recHooks.push({status:i,callback:e}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:i,response:e,_ref:t}){this.recHooks.filter(s=>s.status===i).forEach(s=>s.callback(e))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,i=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=i,this.matchReceive(i)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}trigger(i,e){this.channel.trigger(this.refEvent,{status:i,response:e})}},Ms=class{constructor(i,e){this.callback=i,this.timerCalc=e,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},Vr=class{constructor(i,e,t){this.state=re.closed,this.topic=i,this.params=ht(e||{}),this.socket=t,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Rt(this,Te.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Ms(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=re.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=re.closed,this.socket.remove(this)}),this.onError(s=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,s),this.isJoining()&&this.joinPush.reset(),this.state=re.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Rt(this,Te.leave,ht({}),this.timeout).send(),this.state=re.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Te.reply,(s,n)=>{this.trigger(this.replyEventName(n),s)})}join(i=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=i,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(i){this.on(Te.close,i)}onError(i){return this.on(Te.error,e=>i(e))}on(i,e){let t=this.bindingRef++;return this.bindings.push({event:i,ref:t,callback:e}),t}off(i,e){this.bindings=this.bindings.filter(t=>!(t.event===i&&(typeof e=="undefined"||e===t.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(i,e,t=this.timeout){if(e=e||{},!this.joinedOnce)throw new Error(`tried to push '${i}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let s=new Rt(this,i,function(){return e},t);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}leave(i=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=re.leaving;let e=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Te.close,"leave")},t=new Rt(this,Te.leave,ht({}),i);return t.receive("ok",()=>e()).receive("timeout",()=>e()),t.send(),this.canPush()||t.trigger("ok",{}),t}onMessage(i,e,t){return e}isMember(i,e,t,s){return this.topic!==i?!1:s&&s!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:i,event:e,payload:t,joinRef:s}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(i=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=re.joining,this.joinPush.resend(i))}trigger(i,e,t,s){let n=this.onMessage(i,e,t,s);if(e&&!n)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let r=this.bindings.filter(o=>o.event===i);for(let o=0;o<r.length;o++)r[o].callback(n,t,s||this.joinRef())}replyEventName(i){return`chan_reply_${i}`}isClosed(){return this.state===re.closed}isErrored(){return this.state===re.errored}isJoined(){return this.state===re.joined}isJoining(){return this.state===re.joining}isLeaving(){return this.state===re.leaving}},It=class{static request(i,e,t,s,n,r,o){if(dt.XDomainRequest){let a=new dt.XDomainRequest;return this.xdomainRequest(a,i,e,s,n,r,o)}else{let a=new dt.XMLHttpRequest;return this.xhrRequest(a,i,e,t,s,n,r,o)}}static xdomainRequest(i,e,t,s,n,r,o){return i.timeout=n,i.open(e,t),i.onload=()=>{let a=this.parseJSON(i.responseText);o&&o(a)},r&&(i.ontimeout=r),i.onprogress=()=>{},i.send(s),i}static xhrRequest(i,e,t,s,n,r,o,a){return i.open(e,t,!0),i.timeout=r,i.setRequestHeader("Content-Type",s),i.onerror=()=>a&&a(null),i.onreadystatechange=()=>{if(i.readyState===Fr.complete&&a){let l=this.parseJSON(i.responseText);a(l)}},o&&(i.ontimeout=o),i.send(n),i}static parseJSON(i){if(!i||i==="")return null;try{return JSON.parse(i)}catch(e){return console&&console.log("failed to parse JSON response",i),null}}static serialize(i,e){let t=[];for(var s in i){if(!Object.prototype.hasOwnProperty.call(i,s))continue;let n=e?`${e}[${s}]`:s,r=i[s];typeof r=="object"?t.push(this.serialize(r,n)):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}return t.join("&")}static appendParams(i,e){if(Object.keys(e).length===0)return i;let t=i.match(/\?/)?"&":"?";return`${i}${t}${this.serialize(e)}`}},Di=class{constructor(i){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(i),this.readyState=we.connecting,this.poll()}normalizeEndpoint(i){return i.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ii.websocket),"$1/"+Ii.longpoll)}endpointURL(){return It.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(i,e,t){this.close(i,e,t),this.readyState=we.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===we.open||this.readyState===we.connecting}poll(){this.ajax("GET",null,()=>this.ontimeout(),i=>{if(i){var{status:e,token:t,messages:s}=i;this.token=t}else e=0;switch(e){case 200:s.forEach(n=>{setTimeout(()=>this.onmessage({data:n}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=we.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${e}`)}})}send(i){this.ajax("POST",i,()=>this.onerror("timeout"),e=>{(!e||e.status!==200)&&(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1))})}close(i,e,t){for(let n of this.reqs)n.abort();this.readyState=we.closed;let s=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:i,reason:e,wasClean:t});typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",s)):this.onclose(s)}ajax(i,e,t,s){let n,r=()=>{this.reqs.delete(n),t()};n=It.request(i,this.endpointURL(),"application/json",e,this.timeout,r,o=>{this.reqs.delete(n),this.isActive()&&s(o)}),this.reqs.add(n)}};var Dt={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(i,e){if(i.payload.constructor===ArrayBuffer)return e(this.binaryEncode(i));{let t=[i.join_ref,i.ref,i.topic,i.event,i.payload];return e(JSON.stringify(t))}},decode(i,e){if(i.constructor===ArrayBuffer)return e(this.binaryDecode(i));{let[t,s,n,r,o]=JSON.parse(i);return e({join_ref:t,ref:s,topic:n,event:r,payload:o})}},binaryEncode(i){let{join_ref:e,ref:t,event:s,topic:n,payload:r}=i,o=this.META_LENGTH+e.length+t.length+n.length+s.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),d=0;l.setUint8(d++,this.KINDS.push),l.setUint8(d++,e.length),l.setUint8(d++,t.length),l.setUint8(d++,n.length),l.setUint8(d++,s.length),Array.from(e,p=>l.setUint8(d++,p.charCodeAt(0))),Array.from(t,p=>l.setUint8(d++,p.charCodeAt(0))),Array.from(n,p=>l.setUint8(d++,p.charCodeAt(0))),Array.from(s,p=>l.setUint8(d++,p.charCodeAt(0)));var v=new Uint8Array(a.byteLength+r.byteLength);return v.set(new Uint8Array(a),0),v.set(new Uint8Array(r),a.byteLength),v.buffer},binaryDecode(i){let e=new DataView(i),t=e.getUint8(0),s=new TextDecoder;switch(t){case this.KINDS.push:return this.decodePush(i,e,s);case this.KINDS.reply:return this.decodeReply(i,e,s);case this.KINDS.broadcast:return this.decodeBroadcast(i,e,s)}},decodePush(i,e,t){let s=e.getUint8(1),n=e.getUint8(2),r=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=t.decode(i.slice(o,o+s));o=o+s;let l=t.decode(i.slice(o,o+n));o=o+n;let d=t.decode(i.slice(o,o+r));o=o+r;let v=i.slice(o,i.byteLength);return{join_ref:a,ref:null,topic:l,event:d,payload:v}},decodeReply(i,e,t){let s=e.getUint8(1),n=e.getUint8(2),r=e.getUint8(3),o=e.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=t.decode(i.slice(a,a+s));a=a+s;let d=t.decode(i.slice(a,a+n));a=a+n;let v=t.decode(i.slice(a,a+r));a=a+r;let p=t.decode(i.slice(a,a+o));a=a+o;let _=i.slice(a,i.byteLength),C={status:p,response:_};return{join_ref:l,ref:d,topic:v,event:Te.reply,payload:C}},decodeBroadcast(i,e,t){let s=e.getUint8(1),n=e.getUint8(2),r=this.HEADER_LENGTH+2,o=t.decode(i.slice(r,r+s));r=r+s;let a=t.decode(i.slice(r,r+n));r=r+n;let l=i.slice(r,i.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},Ns=class{constructor(i,e={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=e.timeout||Nr,this.transport=e.transport||dt.WebSocket||Di,this.establishedConnections=0,this.defaultEncoder=Dt.encode.bind(Dt),this.defaultDecoder=Dt.decode.bind(Dt),this.closeWasClean=!1,this.binaryType=e.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Di?(this.encode=e.encode||this.defaultEncoder,this.decode=e.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let t=null;ct&&ct.addEventListener&&(ct.addEventListener("pagehide",s=>{this.conn&&(this.disconnect(),t=this.connectClock)}),ct.addEventListener("pageshow",s=>{t===this.connectClock&&(t=null,this.connect())})),this.heartbeatIntervalMs=e.heartbeatIntervalMs||3e4,this.rejoinAfterMs=s=>e.rejoinAfterMs?e.rejoinAfterMs(s):[1e3,2e3,5e3][s-1]||1e4,this.reconnectAfterMs=s=>e.reconnectAfterMs?e.reconnectAfterMs(s):[10,50,100,150,200,250,500,1e3,2e3][s-1]||5e3,this.logger=e.logger||null,this.longpollerTimeout=e.longpollerTimeout||2e4,this.params=ht(e.params||{}),this.endPoint=`${i}/${Ii.websocket}`,this.vsn=e.vsn||Mr,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Ms(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return Di}replaceTransport(i){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=i}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let i=It.appendParams(It.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return i.charAt(0)!=="/"?i:i.charAt(1)==="/"?`${this.protocol()}:${i}`:`${this.protocol()}://${location.host}${i}`}disconnect(i,e,t){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(i,e,t)}connect(i){i&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=ht(i)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e))}log(i,e,t){this.logger(i,e,t)}hasLogger(){return this.logger!==null}onOpen(i){let e=this.makeRef();return this.stateChangeCallbacks.open.push([e,i]),e}onClose(i){let e=this.makeRef();return this.stateChangeCallbacks.close.push([e,i]),e}onError(i){let e=this.makeRef();return this.stateChangeCallbacks.error.push([e,i]),e}onMessage(i){let e=this.makeRef();return this.stateChangeCallbacks.message.push([e,i]),e}ping(i){if(!this.isConnected())return!1;let e=this.makeRef(),t=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e});let s=this.onMessage(n=>{n.ref===e&&(this.off([s]),i(Date.now()-t))});return!0}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,i])=>i())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),Ur,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(i,e,t){if(!this.conn)return i&&i();this.waitForBufferDone(()=>{this.conn&&(e?this.conn.close(e,t||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),i&&i()})})}waitForBufferDone(i,e=1){if(e===5||!this.conn||!this.conn.bufferedAmount){i();return}setTimeout(()=>{this.waitForBufferDone(i,e+1)},150*e)}waitForSocketClosed(i,e=1){if(e===5||!this.conn||this.conn.readyState===we.closed){i();return}setTimeout(()=>{this.waitForSocketClosed(i,e+1)},150*e)}onConnClose(i){let e=i&&i.code;this.hasLogger()&&this.log("transport","close",i),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&e!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,t])=>t(i))}onConnError(i){this.hasLogger()&&this.log("transport",i);let e=this.transport,t=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,s])=>{s(i,e,t)}),(e===this.transport||t>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(i=>{i.isErrored()||i.isLeaving()||i.isClosed()||i.trigger(Te.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case we.connecting:return"connecting";case we.open:return"open";case we.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(i){this.off(i.stateChangeRefs),this.channels=this.channels.filter(e=>e.joinRef()!==i.joinRef())}off(i){for(let e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter(([t])=>i.indexOf(t)===-1)}channel(i,e={}){let t=new Vr(i,e,this);return this.channels.push(t),t}push(i){if(this.hasLogger()){let{topic:e,event:t,payload:s,ref:n,join_ref:r}=i;this.log("push",`${e} ${t} (${r}, ${n})`,s)}this.isConnected()?this.encode(i,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(i,e=>this.conn.send(e)))}makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}onConnMessage(i){this.decode(i.data,e=>{let{topic:t,event:s,payload:n,ref:r,join_ref:o}=e;r&&r===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${n.status||""} ${t} ${s} ${r&&"("+r+")"||""}`,n);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(t,s,n,o)||l.trigger(s,n,r,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(e)}})}leaveOpenTopic(i){let e=this.channels.find(t=>t.topic===i&&(t.isJoined()||t.isJoining()));e&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${i}"`),e.leave())}};var Ht="consecutive-reloads",Us=10,Fs=5e3,Vs=1e4,js=3e4,Ot=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],Y="data-phx-component",Mt="data-phx-link",Bs="track-static",$s="data-phx-link-state",ae="data-phx-ref",Ae="data-phx-ref-src",Nt="track-uploads",pe="data-phx-upload-ref",qe="data-phx-preflighted-refs",Xs="data-phx-done-refs",Hi="drop-target",ut="data-phx-active-refs",Ge="phx:live-file:updated",ft="data-phx-skip",Oi="data-phx-prune",Mi="page-loading",Ni="phx-connected",Ut="phx-loading",Ui="phx-no-feedback",Fi="phx-error",ke="data-phx-parent-id",Ye="data-phx-main",xe="data-dfd-root-id",Ws="trigger-action",pt="feedback-for",Ft="phx-has-focused",Ks=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],Vt=["checkbox","radio"],jt="phx-has-submitted",le="data-dfd-view",Ce=`[${le}]`,Vi="data-phx-sticky",Ie="data-phx-static",Bt="data-phx-readonly",mt="data-phx-disabled",gt="disable-with",vt="data-phx-disable-with-restore",Qe="hook",Js="debounce",zs="throttle",_t="update",qs="key",me="phxPrivate",ji="auto-recover",bt="phx:live-socket:debug",$t="phx:live-socket:profiling",Xt="phx:live-socket:latency-sim",Gs="progress",Bi="mounted",Ys=1,Qs=200,Zs="dfd-",en=3e4;var Ze="debounce-trigger",Et="throttled",$i="debounce-prev-key",tn={debounce:300,throttle:300},Xi="d",ge="s",ie="c",Wi="e",Ki="r",Ji="t",sn="p";var Wt=class{constructor(e,t,s){this.liveSocket=s,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=s.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=s=>{if(s.target.error===null)this.offset+=s.target.result.byteLength,this.pushChunk(s.target.result);else return W("Read error: "+s.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}};var W=(i,e)=>console.error&&console.error(i,e),ve=i=>{let e=typeof i;return e==="number"||e==="string"&&/^(0|[1-9]\d*)$/.test(i)};function nn(){let i=new Set,e=document.querySelectorAll("*[id]");for(let t=0,s=e.length;t<s;t++)i.has(e[t].id)?console.error(`Multiple IDs detected: ${e[t].id}. Ensure unique element ids.`):i.add(e[t].id)}var rn=(i,e,t,s)=>{i.liveSocket.isDebugEnabled()&&console.log(`${i.id} ${e}: ${t} - `,s)},Kt=i=>typeof i=="function"?i:function(){return i},et=i=>JSON.parse(JSON.stringify(i)),Be=(i,e,t)=>{do{if(i.matches(`[${e}]`)&&!i.disabled)return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1&&!(t&&t.isSameNode(i)||i.matches(Ce)));return null},tt=i=>i!==null&&typeof i=="object"&&!(i instanceof Array),on=(i,e)=>JSON.stringify(i)===JSON.stringify(e),zi=i=>{for(let e in i)return!1;return!0},he=(i,e)=>i&&e(i),an=function(i,e,t,s){i.forEach(n=>{new Wt(n,t.config.chunk_size,s).upload()})};var ln={canPushState(){return typeof history.pushState!="undefined"},dropLocal(i,e,t){return i.removeItem(this.localKey(e,t))},updateLocal(i,e,t,s,n){let r=this.getLocal(i,e,t),o=this.localKey(e,t),a=r===null?s:n(r);return i.setItem(o,JSON.stringify(a)),a},getLocal(i,e,t){return JSON.parse(i.getItem(this.localKey(e,t)))},updateCurrentState(i){!this.canPushState()||history.replaceState(i(history.state||{}),"",window.location.href)},pushState(i,e,t){if(this.canPushState()){if(t!==window.location.href){if(e.type=="redirect"&&e.scroll){let n=history.state||{};n.scroll=e.scroll,history.replaceState(n,"",window.location.href)}delete e.scroll,history[i+"State"](e,"",t||null);let s=this.getHashTargetEl(window.location.hash);s?s.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(t)},setCookie(i,e){document.cookie=`${i}=${e}`},getCookie(i){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${i}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(i,e){e&&ln.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=i},localKey(i,e){return`${i}-${e}`},getHashTargetEl(i){let e=i.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},ce=ln;var _e={byId(i){return document.getElementById(i)||W(`no id found for ${i}`)},removeClass(i,e){i.classList.remove(e),i.classList.length===0&&i.removeAttribute("class")},all(i,e,t){if(!i)return[];let s=Array.from(i.querySelectorAll(e));return t?s.forEach(t):s},childNodeLength(i){let e=document.createElement("template");return e.innerHTML=i,e.content.childElementCount},isUploadInput(i){return i.type==="file"&&i.getAttribute(pe)!==null},findUploadInputs(i){return this.all(i,`input[type="file"][${pe}]`)},findComponentNodeList(i,e){return this.filterWithinSameLiveView(this.all(i,`[${Y}="${e}"]`),i)},isPhxDestroyed(i){return!!(i.id&&_e.private(i,"destroyed"))},markPhxChildDestroyed(i){this.isPhxChild(i)&&i.setAttribute(le,""),this.putPrivate(i,"destroyed",!0)},findPhxChildrenInFragment(i,e){let t=document.createElement("template");return t.innerHTML=i,this.findPhxChildren(t.content,e)},isIgnored(i,e){return(i.getAttribute(e)||i.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(i,e,t){return i.getAttribute&&t.indexOf(i.getAttribute(e))>=0},findPhxSticky(i){return this.all(i,`[${Vi}]`)},findPhxChildren(i,e){return this.all(i,`${Ce}[${ke}="${e}"]`)},findParentCIDs(i,e){let t=new Set(e),s=e.reduce((n,r)=>{let o=`[${Y}="${r}"] [${Y}]`;return this.filterWithinSameLiveView(this.all(i,o),i).map(a=>parseInt(a.getAttribute(Y))).forEach(a=>n.delete(a)),n},t);return s.size===0?new Set(e):s},filterWithinSameLiveView(i,e){return e.querySelector(Ce)?i.filter(t=>this.withinSameLiveView(t,e)):i},withinSameLiveView(i,e){for(;i=i.parentNode;){if(i.isSameNode(e))return!0;if(i.getAttribute(le)!==null)return!1}},private(i,e){return i[me]&&i[me][e]},deletePrivate(i,e){i[me]&&delete i[me][e]},putPrivate(i,e,t){i[me]||(i[me]={}),i[me][e]=t},updatePrivate(i,e,t,s){let n=this.private(i,e);n===void 0?this.putPrivate(i,e,s(t)):this.putPrivate(i,e,s(n))},copyPrivates(i,e){e[me]&&(i[me]=e[me])},putTitle(i){let e=document.querySelector("title"),{prefix:t,suffix:s}=e.dataset;document.title=`${t||""}${i}${s||""}`},debounce(i,e,t,s,n,r,o,a){let l=i.getAttribute(t),d=i.getAttribute(n);l===""&&(l=s),d===""&&(d=r);let v=l||d;switch(v){case null:return a();case"blur":this.once(i,"debounce-blur")&&i.addEventListener("blur",()=>a());return;default:let p=parseInt(v),_=()=>d?this.deletePrivate(i,Et):a(),C=this.incCycle(i,Ze,_);if(isNaN(p))return W(`invalid throttle/debounce value: ${v}`);if(d){let w=!1;if(e.type==="keydown"){let H=this.private(i,$i);this.putPrivate(i,$i,e.key),w=H!==e.key}if(!w&&this.private(i,Et))return!1;a(),this.putPrivate(i,Et,!0),setTimeout(()=>{o()&&this.triggerCycle(i,Ze)},p)}else setTimeout(()=>{o()&&this.triggerCycle(i,Ze,C)},p);let y=i.form;y&&this.once(y,"bind-debounce")&&y.addEventListener("submit",()=>{Array.from(new FormData(y).entries(),([w])=>{let H=y.querySelector(`[name="${w}"]`);this.incCycle(H,Ze),this.deletePrivate(H,Et)})}),this.once(i,"bind-debounce")&&i.addEventListener("blur",()=>this.triggerCycle(i,Ze))}},triggerCycle(i,e,t){let[s,n]=this.private(i,e);t||(t=s),t===s&&(this.incCycle(i,e),n())},once(i,e){return this.private(i,e)===!0?!1:(this.putPrivate(i,e,!0),!0)},incCycle(i,e,t=function(){}){let[s]=this.private(i,e)||[0,t];return s++,this.putPrivate(i,e,[s,t]),s},discardError(i,e,t){let s=e.getAttribute&&e.getAttribute(t),n=s&&i.querySelector(`[id="${s}"], [name="${s}"], [name="${s}[]"]`);!n||this.private(n,Ft)||this.private(n.form,jt)||e.classList.add(Ui)},showError(i,e){(i.id||i.name)&&this.all(i.form,`[${e}="${i.id}"], [${e}="${i.name}"]`,t=>{this.removeClass(t,Ui)})},isPhxChild(i){return i.getAttribute&&i.getAttribute(ke)},isPhxSticky(i){return i.getAttribute&&i.getAttribute(Vi)!==null},firstPhxChild(i){return this.isPhxChild(i)?i:this.all(i,`[${ke}]`)[0]},dispatchEvent(i,e,t={}){let n={bubbles:t.bubbles===void 0?!0:!!t.bubbles,cancelable:!0,detail:t.detail||{}},r=e==="click"?new MouseEvent("click",n):new CustomEvent(e,n);i.dispatchEvent(r)},cloneNode(i,e){if(typeof e=="undefined")return i.cloneNode(!0);{let t=i.cloneNode(!1);return t.innerHTML=e,t}},mergeAttrs(i,e,t={}){let s=t.exclude||[],n=t.isIgnored,r=e.attributes;for(let a=r.length-1;a>=0;a--){let l=r[a].name;s.indexOf(l)<0&&i.setAttribute(l,e.getAttribute(l))}let o=i.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;n?l.startsWith("data-")&&!e.hasAttribute(l)&&i.removeAttribute(l):e.hasAttribute(l)||i.removeAttribute(l)}},mergeFocusedInput(i,e){i instanceof HTMLSelectElement||_e.mergeAttrs(i,e,{exclude:["value"]}),e.readOnly?i.setAttribute("readonly",!0):i.removeAttribute("readonly")},hasSelectionRange(i){return i.setSelectionRange&&(i.type==="text"||i.type==="textarea")},restoreFocus(i,e,t){if(!_e.isTextualInput(i))return;let s=i.matches(":focus");i.readOnly&&i.blur(),s||i.focus(),this.hasSelectionRange(i)&&i.setSelectionRange(e,t)},isFormInput(i){return/^(?:input|select|textarea)$/i.test(i.tagName)&&i.type!=="button"},syncAttrsToProps(i){i instanceof HTMLInputElement&&Vt.indexOf(i.type.toLocaleLowerCase())>=0&&(i.checked=i.getAttribute("checked")!==null)},isTextualInput(i){return Ks.indexOf(i.type)>=0},isNowTriggerFormExternal(i,e){return i.getAttribute&&i.getAttribute(e)!==null},syncPendingRef(i,e,t){let s=i.getAttribute(ae);if(s===null)return!0;let n=i.getAttribute(Ae);return _e.isFormInput(i)||i.getAttribute(t)!==null?(_e.isUploadInput(i)&&_e.mergeAttrs(i,e,{isIgnored:!0}),_e.putPrivate(i,ae,e),!1):(Ot.forEach(r=>{i.classList.contains(r)&&e.classList.add(r)}),e.setAttribute(ae,s),e.setAttribute(Ae,n),!0)},cleanChildNodes(i,e){if(_e.isPhxUpdate(i,e,["append","prepend"])){let t=[];i.childNodes.forEach(s=>{s.id||(s.nodeType===Node.TEXT_NODE&&s.nodeValue.trim()===""||W(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(s.outerHTML||s.nodeValue).trim()}"

`),t.push(s))}),t.forEach(s=>s.remove())}},replaceRootContainer(i,e,t){let s=new Set(["id",le,Ie,Ye,xe]);if(i.tagName.toLowerCase()===e.toLowerCase())return Array.from(i.attributes).filter(n=>!s.has(n.name.toLowerCase())).forEach(n=>i.removeAttribute(n.name)),Object.keys(t).filter(n=>!s.has(n.toLowerCase())).forEach(n=>i.setAttribute(n,t[n])),i;{let n=document.createElement(e);return Object.keys(t).forEach(r=>n.setAttribute(r,t[r])),s.forEach(r=>n.setAttribute(r,i.getAttribute(r))),n.innerHTML=i.innerHTML,i.replaceWith(n),n}},getSticky(i,e,t){let s=(_e.private(i,"sticky")||[]).find(([n])=>e===n);if(s){let[n,r,o]=s;return o}else return typeof t=="function"?t():t},deleteSticky(i,e){this.updatePrivate(i,"sticky",[],t=>t.filter(([s,n])=>s!==e))},putSticky(i,e,t){let s=t(i);this.updatePrivate(i,"sticky",[],n=>{let r=n.findIndex(([o])=>e===o);return r>=0?n[r]=[e,t,s]:n.push([e,t,s]),n})},applyStickyOperations(i){let e=_e.private(i,"sticky");!e||e.forEach(([t,s,n])=>this.putSticky(i,t,s))}},f=_e;var it=class{static isActive(e,t){let s=t._phxRef===void 0,r=e.getAttribute(ut).split(",").indexOf(B.genFileRef(t))>=0;return t.size>0&&(s||r)}static isPreflighted(e,t){return e.getAttribute(qe).split(",").indexOf(B.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,s){this.ref=B.genFileRef(t),this.fileEl=e,this.file=t,this.view=s,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Ge,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{B.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(Ge,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),B.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Ge,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(ut).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||W(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:an}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||W(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}};var jr=0,B=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(jr++).toString(),e._phxRef)}static getEntryDataURL(e,t,s){let n=this.activeFiles(e).find(r=>this.genFileRef(r)===t);s(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return f.findUploadInputs(e).forEach(s=>{s.getAttribute(qe)!==s.getAttribute(Xs)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),s={};return t.forEach(n=>{let r={path:e.name},o=e.getAttribute(pe);s[o]=s[o]||[],r.ref=this.genFileRef(n),r.last_modified=n.lastModified,r.name=n.name||r.ref,r.relative_path=n.webkitRelativePath,r.type=n.type,r.size=n.size,s[o].push(r)}),s}static clearFiles(e){e.value=null,e.removeAttribute(pe),f.putPrivate(e,"files",[])}static untrackFile(e,t){f.putPrivate(e,"files",f.private(e,"files").filter(s=>!Object.is(s,t)))}static trackFiles(e,t){if(e.getAttribute("multiple")!==null){let s=t.filter(n=>!this.activeFiles(e).find(r=>Object.is(r,n)));f.putPrivate(e,"files",this.activeFiles(e).concat(s)),e.value=null}else f.putPrivate(e,"files",t)}static activeFileInputs(e){let t=f.findUploadInputs(e);return Array.from(t).filter(s=>s.files&&this.activeFiles(s).length>0)}static activeFiles(e){return(f.private(e,"files")||[]).filter(t=>it.isActive(e,t))}static inputsAwaitingPreflight(e){let t=f.findUploadInputs(e);return Array.from(t).filter(s=>this.filesAwaitingPreflight(s).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!it.isPreflighted(e,t))}constructor(e,t,s){this.view=t,this.onComplete=s,this._entries=Array.from(B.filesAwaitingPreflight(e)||[]).map(n=>new it(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,s){this._entries=this._entries.map(r=>(r.zipPostFlight(e),r.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),r));let n=this._entries.reduce((r,o)=>{let{name:a,callback:l}=o.uploader(s.uploaders);return r[a]=r[a]||{callback:l,entries:[]},r[a].entries.push(o),r},{});for(let r in n){let{callback:o,entries:a}=n[r];o(a,t,e,s)}}};var Br={focusMain(){let i=document.querySelector("main h1, main, h1");if(i){let e=i.tabIndex;i.tabIndex=-1,i.focus(),i.tabIndex=e}},anyOf(i,e){return e.find(t=>i instanceof t)},isFocusable(i,e){return i instanceof HTMLAnchorElement&&i.rel!=="ignore"||i instanceof HTMLAreaElement&&i.href!==void 0||!i.disabled&&this.anyOf(i,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||i instanceof HTMLIFrameElement||i.tabIndex>0||!e&&i.tabIndex===0&&i.getAttribute("tabindex")!==null&&i.getAttribute("aria-hidden")!=="true"},attemptFocus(i,e){if(this.isFocusable(i,e))try{i.focus()}catch(t){}return!!document.activeElement&&document.activeElement.isSameNode(i)},focusFirstInteractive(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e,!0)||this.focusFirstInteractive(e,!0))return!0;e=e.nextElementSibling}},focusFirst(i){let e=i.firstElementChild;for(;e;){if(this.attemptFocus(e)||this.focusFirst(e))return!0;e=e.nextElementSibling}},focusLast(i){let e=i.lastElementChild;for(;e;){if(this.attemptFocus(e)||this.focusLast(e))return!0;e=e.previousElementSibling}}},De=Br;var $r={LiveFileUpload:{activeRefs(){return this.el.getAttribute(ut)},preflightedRefs(){return this.el.getAttribute(qe)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let i=this.preflightedRefs();this.preflightedWas!==i&&(this.preflightedWas=i,i===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Ge))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(pe)),B.getEntryDataURL(this.inputEl,this.ref,i=>{this.url=i,this.el.src=i})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>De.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>De.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&De.focusFirst(this.el)}}},hn=$r;var Jt=class{constructor(e,t,s){let n=new Set,r=new Set([...t.children].map(a=>a.id)),o=[];Array.from(e.children).forEach(a=>{if(a.id&&(n.add(a.id),r.has(a.id))){let l=a.previousElementSibling&&a.previousElementSibling.id;o.push({elementId:a.id,previousElementId:l})}}),this.containerId=t.id,this.updateType=s,this.elementsToModify=o,this.elementIdsToAdd=[...r].filter(a=>!n.has(a))}perform(){let e=f.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?he(document.getElementById(t.previousElementId),s=>{he(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==s.id||s.insertAdjacentElement("afterend",n)})}):he(document.getElementById(t.elementId),s=>{s.previousElementSibling==null||e.insertAdjacentElement("afterbegin",s)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{he(document.getElementById(t),s=>e.insertAdjacentElement("afterbegin",s))})}};var cn=11;function Xr(i,e){var t=e.attributes,s,n,r,o,a;if(!(e.nodeType===cn||i.nodeType===cn)){for(var l=t.length-1;l>=0;l--)s=t[l],n=s.name,r=s.namespaceURI,o=s.value,r?(n=s.localName||n,a=i.getAttributeNS(r,n),a!==o&&(s.prefix==="xmlns"&&(n=s.name),i.setAttributeNS(r,n,o))):(a=i.getAttribute(n),a!==o&&i.setAttribute(n,o));for(var d=i.attributes,v=d.length-1;v>=0;v--)s=d[v],n=s.name,r=s.namespaceURI,r?(n=s.localName||n,e.hasAttributeNS(r,n)||i.removeAttributeNS(r,n)):e.hasAttribute(n)||i.removeAttribute(n)}}var zt,Wr="http://www.w3.org/1999/xhtml",se=typeof document=="undefined"?void 0:document,Kr=!!se&&"content"in se.createElement("template"),Jr=!!se&&se.createRange&&"createContextualFragment"in se.createRange();function zr(i){var e=se.createElement("template");return e.innerHTML=i,e.content.childNodes[0]}function qr(i){zt||(zt=se.createRange(),zt.selectNode(se.body));var e=zt.createContextualFragment(i);return e.childNodes[0]}function Gr(i){var e=se.createElement("body");return e.innerHTML=i,e.childNodes[0]}function Yr(i){return i=i.trim(),Kr?zr(i):Jr?qr(i):Gr(i)}function qt(i,e){var t=i.nodeName,s=e.nodeName,n,r;return t===s?!0:(n=t.charCodeAt(0),r=s.charCodeAt(0),n<=90&&r>=97?t===s.toUpperCase():r<=90&&n>=97?s===t.toUpperCase():!1)}function Qr(i,e){return!e||e===Wr?se.createElement(i):se.createElementNS(e,i)}function Zr(i,e){for(var t=i.firstChild;t;){var s=t.nextSibling;e.appendChild(t),t=s}return e}function qi(i,e,t){i[t]!==e[t]&&(i[t]=e[t],i[t]?i.setAttribute(t,""):i.removeAttribute(t))}var dn={OPTION:function(i,e){var t=i.parentNode;if(t){var s=t.nodeName.toUpperCase();s==="OPTGROUP"&&(t=t.parentNode,s=t&&t.nodeName.toUpperCase()),s==="SELECT"&&!t.hasAttribute("multiple")&&(i.hasAttribute("selected")&&!e.selected&&(i.setAttribute("selected","selected"),i.removeAttribute("selected")),t.selectedIndex=-1)}qi(i,e,"selected")},INPUT:function(i,e){qi(i,e,"checked"),qi(i,e,"disabled"),i.value!==e.value&&(i.value=e.value),e.hasAttribute("value")||i.removeAttribute("value")},TEXTAREA:function(i,e){var t=e.value;i.value!==t&&(i.value=t);var s=i.firstChild;if(s){var n=s.nodeValue;if(n==t||!t&&n==i.placeholder)return;s.nodeValue=t}},SELECT:function(i,e){if(!e.hasAttribute("multiple")){for(var t=-1,s=0,n=i.firstChild,r,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")r=n,n=r.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){t=s;break}s++}n=n.nextSibling,!n&&r&&(n=r.nextSibling,r=null)}i.selectedIndex=t}}},St=1,un=11,fn=3,pn=8;function He(){}function eo(i){if(i)return i.getAttribute&&i.getAttribute("id")||i.id}function to(i){return function(t,s,n){if(n||(n={}),typeof s=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var r=s;s=se.createElement("html"),s.innerHTML=r}else s=Yr(s);else s.nodeType===un&&(s=s.firstElementChild);var o=n.getNodeKey||eo,a=n.onBeforeNodeAdded||He,l=n.onNodeAdded||He,d=n.onBeforeElUpdated||He,v=n.onElUpdated||He,p=n.onBeforeNodeDiscarded||He,_=n.onNodeDiscarded||He,C=n.onBeforeElChildrenUpdated||He,y=n.skipFromChildren||He,w=n.addChild||function(A,k){return A.appendChild(k)},H=n.childrenOnly===!0,x=Object.create(null),L=[];function $(A){L.push(A)}function g(A,k){if(A.nodeType===St)for(var F=A.firstChild;F;){var P=void 0;k&&(P=o(F))?$(P):(_(F),F.firstChild&&g(F,k)),F=F.nextSibling}}function R(A,k,F){p(A)!==!1&&(k&&k.removeChild(A),_(A),g(A,F))}function z(A){if(A.nodeType===St||A.nodeType===un)for(var k=A.firstChild;k;){var F=o(k);F&&(x[F]=k),z(k),k=k.nextSibling}}z(t);function ne(A){l(A);for(var k=A.firstChild;k;){var F=k.nextSibling,P=o(k);if(P){var M=x[P];M&&qt(k,M)?(k.parentNode.replaceChild(M,k),Le(M,k)):ne(k)}else ne(k);k=F}}function Ke(A,k,F){for(;k;){var P=k.nextSibling;(F=o(k))?$(F):R(k,A,!0),k=P}}function Le(A,k,F){var P=o(k);P&&delete x[P],!(!F&&(d(A,k)===!1||(i(A,k),v(A),C(A,k)===!1)))&&(A.nodeName!=="TEXTAREA"?rt(A,k):dn.TEXTAREA(A,k))}function rt(A,k){var F=y(A),P=k.firstChild,M=A.firstChild,Re,oe,Se,Ve,Q;e:for(;P;){for(Ve=P.nextSibling,Re=o(P);!F&&M;){if(Se=M.nextSibling,P.isSameNode&&P.isSameNode(M)){P=Ve,M=Se;continue e}oe=o(M);var ze=M.nodeType,fe=void 0;if(ze===P.nodeType&&(ze===St?(Re?Re!==oe&&((Q=x[Re])?Se===Q?fe=!1:(A.insertBefore(Q,M),oe?$(oe):R(M,A,!0),M=Q):fe=!1):oe&&(fe=!1),fe=fe!==!1&&qt(M,P),fe&&Le(M,P)):(ze===fn||ze==pn)&&(fe=!0,M.nodeValue!==P.nodeValue&&(M.nodeValue=P.nodeValue))),fe){P=Ve,M=Se;continue e}oe?$(oe):R(M,A,!0),M=Se}if(Re&&(Q=x[Re])&&qt(Q,P))F||w(A,Q),Le(Q,P);else{var at=a(P);at!==!1&&(at&&(P=at),P.actualize&&(P=P.actualize(A.ownerDocument||se)),w(A,P),ne(P))}P=Ve,M=Se}Ke(A,M,oe);var kt=dn[A.nodeName];kt&&kt(A,k)}var K=t,Ue=K.nodeType,Je=s.nodeType;if(!H){if(Ue===St)Je===St?qt(t,s)||(_(t),K=Zr(t,Qr(s.nodeName,s.namespaceURI))):K=s;else if(Ue===fn||Ue===pn){if(Je===Ue)return K.nodeValue!==s.nodeValue&&(K.nodeValue=s.nodeValue),K;K=s}}if(K===s)_(t);else{if(s.isSameNode&&s.isSameNode(K))return;if(Le(K,s,H),L)for(var ot=0,yi=L.length;ot<yi;ot++){var Fe=x[L[ot]];Fe&&R(Fe,Fe.parentNode,!1)}}return!H&&K!==t&&t.parentNode&&(K.actualize&&(K=K.actualize(t.ownerDocument||se)),t.parentNode.replaceChild(K,t)),K}}var io=to(Xr),Gi=io;var $e=class{static patchEl(e,t,s){Gi(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,r)=>{if(s&&s.isSameNode(n)&&f.isFormInput(n))return f.mergeFocusedInput(n,r),!1}})}constructor(e,t,s,n,r){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=s,this.rootID=e.root.id,this.html=n,this.targetCID=r,this.cidPatch=ve(this.targetCID),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(s=>s(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(s=>s(...t))}markPrunableContentForRemoval(){f.all(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",e=>{e.setAttribute(Oi,"")})}perform(){let{view:e,liveSocket:t,container:s,html:n}=this,r=this.isCIDPatch()?this.targetCIDContainer(n):s;if(this.isCIDPatch()&&!r)return;let o=t.getActiveElement(),{selectionStart:a,selectionEnd:l}=o&&f.hasSelectionRange(o)?o:{},d=t.binding(_t),v=t.binding(pt),p=t.binding(gt),_=t.binding(Ws),C=t.binding("remove"),y=[],w=[],H=[],x=[],L=null,$=t.time("premorph container prep",()=>this.buildDiffHTML(s,n,d,r));return this.trackBefore("added",s),this.trackBefore("updated",s,s),t.time("morphdom",()=>{Gi(r,$,{childrenOnly:r.getAttribute(Y)===null,getNodeKey:g=>f.isPhxDestroyed(g)?null:g.id,onBeforeNodeAdded:g=>(this.trackBefore("added",g),g),onNodeAdded:g=>{g instanceof HTMLImageElement&&g.srcset?g.srcset=g.srcset:g instanceof HTMLVideoElement&&g.autoplay&&g.play(),f.isNowTriggerFormExternal(g,_)&&(L=g),f.discardError(r,g,v),(f.isPhxChild(g)&&e.ownsElement(g)||f.isPhxSticky(g)&&e.ownsElement(g.parentNode))&&this.trackAfter("phxChildAdded",g),y.push(g)},onNodeDiscarded:g=>{(f.isPhxChild(g)||f.isPhxSticky(g))&&t.destroyViewByEl(g),this.trackAfter("discarded",g)},onBeforeNodeDiscarded:g=>g.getAttribute&&g.getAttribute(Oi)!==null?!0:g.parentNode!==null&&f.isPhxUpdate(g.parentNode,d,["append","prepend"])&&g.id?!1:g.getAttribute&&g.getAttribute(C)?(x.push(g),!1):!this.skipCIDSibling(g),onElUpdated:g=>{f.isNowTriggerFormExternal(g,_)&&(L=g),w.push(g)},onBeforeElUpdated:(g,R)=>{if(f.cleanChildNodes(R,d),this.skipCIDSibling(R)||f.isPhxSticky(g))return!1;if(f.isIgnored(g,d)||g.form&&g.form.isSameNode(L))return this.trackBefore("updated",g,R),f.mergeAttrs(g,R,{isIgnored:!0}),w.push(g),f.applyStickyOperations(g),!1;if(g.type==="number"&&g.validity&&g.validity.badInput)return!1;if(!f.syncPendingRef(g,R,p))return f.isUploadInput(g)&&(this.trackBefore("updated",g,R),w.push(g)),f.applyStickyOperations(g),!1;if(f.isPhxChild(R)){let ne=g.getAttribute(le);return f.mergeAttrs(g,R,{exclude:[Ie]}),ne!==""&&g.setAttribute(le,ne),g.setAttribute(xe,this.rootID),f.applyStickyOperations(g),!1}return f.copyPrivates(R,g),f.discardError(r,R,v),o&&g.isSameNode(o)&&f.isFormInput(g)?(this.trackBefore("updated",g,R),f.mergeFocusedInput(g,R),f.syncAttrsToProps(g),w.push(g),f.applyStickyOperations(g),!1):(f.isPhxUpdate(R,d,["append","prepend"])&&H.push(new Jt(g,R,R.getAttribute(d))),f.syncAttrsToProps(R),f.applyStickyOperations(R),this.trackBefore("updated",g,R),!0)}})}),t.isDebugEnabled()&&nn(),H.length>0&&t.time("post-morph append/prepend restoration",()=>{H.forEach(g=>g.perform())}),t.silenceEvents(()=>f.restoreFocus(o,a,l)),f.dispatchEvent(document,"phx:update"),y.forEach(g=>this.trackAfter("added",g)),w.forEach(g=>this.trackAfter("updated",g)),x.length>0&&(t.transitionRemoves(x),t.requestDOMUpdate(()=>{x.forEach(g=>{let R=f.firstPhxChild(g);R&&t.destroyViewByEl(R),g.remove()}),this.trackAfter("transitionsDiscarded",x)})),L&&(t.disconnect(),L.submit()),!0}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(ft)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...s]=f.findComponentNodeList(this.container,this.targetCID);return s.length===0&&f.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,s,n){let r=this.isCIDPatch(),o=r&&n.getAttribute(Y)===this.targetCID.toString();if(!r||o)return t;{let a=null,l=document.createElement("template");a=f.cloneNode(n);let[d,...v]=f.findComponentNodeList(a,this.targetCID);return l.innerHTML=t,v.forEach(p=>p.remove()),Array.from(a.childNodes).forEach(p=>{p.id&&p.nodeType===Node.ELEMENT_NODE&&p.getAttribute(Y)!==this.targetCID.toString()&&(p.setAttribute(ft,""),p.innerHTML="")}),Array.from(l.content.childNodes).forEach(p=>a.insertBefore(p,d)),d.remove(),a.outerHTML}}};var yt=class{static extract(e){let{[Ki]:t,[Wi]:s,[Ji]:n}=e;return delete e[Ki],delete e[Wi],delete e[Ji],{diff:e,title:n,reply:t||null,events:s||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){return this.recursiveToString(this.rendered,this.rendered[ie],e)}recursiveToString(e,t=e[ie],s){s=s?new Set(s):null;let n={buffer:"",components:t,onlyCids:s};return this.toOutputBuffer(e,null,n),n.buffer}componentCIDs(e){return Object.keys(e[ie]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[ie]?Object.keys(e).length===1:!1}getComponent(e,t){return e[ie][t]}mergeDiff(e){let t=e[ie],s={};if(delete e[ie],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[ie]=this.rendered[ie]||{},t){let n=this.rendered[ie];for(let r in t)t[r]=this.cachedFindComponent(r,t[r],n,t,s);for(let r in t)n[r]=t[r];e[ie]=t}}cachedFindComponent(e,t,s,n,r){if(r[e])return r[e];{let o,a,l=t[ge];if(ve(l)){let d;l>0?d=this.cachedFindComponent(l,n[l],s,n,r):d=s[-l],a=d[ge],o=this.cloneMerge(d,t),o[ge]=a}else o=t[ge]!==void 0?t:this.cloneMerge(s[e]||{},t);return r[e]=o,o}}mutableMerge(e,t){return t[ge]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let s in t){let n=t[s],r=e[s];tt(n)&&n[ge]===void 0&&tt(r)?this.doMutableMerge(r,n):e[s]=n}}cloneMerge(e,t){let s=U(U({},e),t);for(let n in s){let r=t[n],o=e[n];tt(r)&&r[ge]===void 0&&tt(o)&&(s[n]=this.cloneMerge(o,r))}return s}componentToString(e){return this.recursiveCIDToString(this.rendered[ie],e)}pruneCIDs(e){e.forEach(t=>delete this.rendered[ie][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[ge]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,s){if(e[Xi])return this.comprehensionToBuffer(e,t,s);let{[ge]:n}=e;n=this.templateStatic(n,t),s.buffer+=n[0];for(let r=1;r<n.length;r++)this.dynamicToBuffer(e[r-1],t,s),s.buffer+=n[r]}comprehensionToBuffer(e,t,s){let{[Xi]:n,[ge]:r}=e;r=this.templateStatic(r,t);let o=t||e[sn];for(let a=0;a<n.length;a++){let l=n[a];s.buffer+=r[0];for(let d=1;d<r.length;d++)this.dynamicToBuffer(l[d-1],o,s),s.buffer+=r[d]}}dynamicToBuffer(e,t,s){typeof e=="number"?s.buffer+=this.recursiveCIDToString(s.components,e,s.onlyCids):tt(e)?this.toOutputBuffer(e,t,s):s.buffer+=e}recursiveCIDToString(e,t,s){let n=e[t]||W(`no component for CID ${t}`,e),r=document.createElement("template");r.innerHTML=this.recursiveToString(n,e,s);let o=r.content,a=s&&!s.has(t),[l,d]=Array.from(o.childNodes).reduce(([v,p],_,C)=>_.nodeType===Node.ELEMENT_NODE?_.getAttribute(Y)?[v,!0]:(_.setAttribute(Y,t),_.id||(_.id=`${this.parentViewId()}-${t}-${C}`),a&&(_.setAttribute(ft,""),_.innerHTML=""),[!0,p]):_.nodeValue.trim()!==""?(W(`only HTML element tags are allowed at the root of components.

got: "${_.nodeValue.trim()}"

within:
`,r.innerHTML.trim()),_.replaceWith(this.createSpan(_.nodeValue,t)),[!0,p]):(_.remove(),[v,p]),[!1,!1]);return!l&&!d?(W(`expected at least one HTML element tag inside a component, but the component is empty:
`,r.innerHTML.trim()),this.createSpan("",t).outerHTML):(!l&&d&&W("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",r.innerHTML.trim()),r.innerHTML)}createSpan(e,t){let s=document.createElement("span");return s.innerText=e,s.setAttribute(Y,t),s}};var so=1,Oe=class{static makeID(){return so++}static elementID(e){return e.phxHookId}constructor(e,t,s){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=s,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},s=function(){}){return this.__view.pushHookEvent(null,e,t,s)}pushEventTo(e,t,s={},n=function(){}){return this.__view.withinTargets(e,(r,o)=>r.pushHookEvent(o,t,s,n))}handleEvent(e,t){let s=(n,r)=>r?e:t(n.detail);return window.addEventListener(`phx:${e}`,s),this.__listeners.add(s),s}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,s){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,s))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}};var Gt=null,no={exec(i,e,t,s,n){let[r,o]=n||[null,{}];(e.charAt(0)==="["?JSON.parse(e):[[r,o]]).forEach(([l,d])=>{l===r&&o.data&&(d.data=Object.assign(d.data||{},o.data)),this.filterToEls(s,d).forEach(v=>{this[`exec_${l}`](i,e,t,s,v,d)})})},isVisible(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length>0)},exec_dispatch(i,e,t,s,n,{to:r,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=s,f.dispatchEvent(n,o,{detail:a,bubbles:l})},exec_push(i,e,t,s,n,r){if(!t.isConnected())return;let{event:o,data:a,target:l,page_loading:d,loading:v,value:p,dispatcher:_}=r,C={loading:v,value:p,target:l,page_loading:!!d},y=i==="change"&&_?_:s,w=l||y.getAttribute(t.binding("target"))||y;t.withinTargets(w,(H,x)=>{if(i==="change"){let{newCid:L,_target:$,callback:g}=r;$=$||(s instanceof HTMLInputElement?s.name:void 0),$&&(C._target=$),H.pushInput(s,x,L,o||e,C,g)}else i==="submit"?H.submitForm(s,x,o||e,C):H.pushEvent(i,s,x,o||e,a,C)})},exec_navigate(i,e,t,s,n,{href:r,replace:o}){t.liveSocket.historyRedirect(r,o?"replace":"push")},exec_patch(i,e,t,s,n,{href:r,replace:o}){t.liveSocket.pushHistoryPatch(r,o?"replace":"push",s)},exec_focus(i,e,t,s,n){window.requestAnimationFrame(()=>De.attemptFocus(n))},exec_focus_first(i,e,t,s,n){window.requestAnimationFrame(()=>De.focusFirstInteractive(n)||De.focusFirst(n))},exec_push_focus(i,e,t,s,n){window.requestAnimationFrame(()=>Gt=n||s)},exec_pop_focus(i,e,t,s,n){window.requestAnimationFrame(()=>{Gt&&Gt.focus(),Gt=null})},exec_add_class(i,e,t,s,n,{names:r,transition:o,time:a}){this.addOrRemoveClasses(n,r,[],o,a,t)},exec_remove_class(i,e,t,s,n,{names:r,transition:o,time:a}){this.addOrRemoveClasses(n,[],r,o,a,t)},exec_transition(i,e,t,s,n,{time:r,transition:o}){let[a,l,d]=o,v=()=>this.addOrRemoveClasses(n,a.concat(l),[]),p=()=>this.addOrRemoveClasses(n,d,a.concat(l));t.transition(r,v,p)},exec_toggle(i,e,t,s,n,{display:r,ins:o,outs:a,time:l}){this.toggle(i,t,n,r,o,a,l)},exec_show(i,e,t,s,n,{display:r,transition:o,time:a}){this.show(i,t,n,r,o,a)},exec_hide(i,e,t,s,n,{display:r,transition:o,time:a}){this.hide(i,t,n,r,o,a)},exec_set_attr(i,e,t,s,n,{attr:[r,o]}){this.setOrRemoveAttrs(n,[[r,o]],[])},exec_remove_attr(i,e,t,s,n,{attr:r}){this.setOrRemoveAttrs(n,[],[r])},show(i,e,t,s,n,r){this.isVisible(t)||this.toggle(i,e,t,s,n,null,r)},hide(i,e,t,s,n,r){this.isVisible(t)&&this.toggle(i,e,t,s,null,n,r)},toggle(i,e,t,s,n,r,o){let[a,l,d]=n||[[],[],[]],[v,p,_]=r||[[],[],[]];if(a.length>0||v.length>0)if(this.isVisible(t)){let C=()=>{this.addOrRemoveClasses(t,p,a.concat(l).concat(d)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,v,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,_,p))})};t.dispatchEvent(new Event("phx:hide-start")),e.transition(o,C,()=>{this.addOrRemoveClasses(t,[],v.concat(_)),f.putSticky(t,"toggle",y=>y.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))})}else{if(i==="remove")return;let C=()=>{this.addOrRemoveClasses(t,l,v.concat(p).concat(_)),f.putSticky(t,"toggle",y=>y.style.display=s||"block"),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,d,l))})};t.dispatchEvent(new Event("phx:show-start")),e.transition(o,C,()=>{this.addOrRemoveClasses(t,[],a.concat(d)),t.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(t)?window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:hide-start")),f.putSticky(t,"toggle",C=>C.style.display="none"),t.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{t.dispatchEvent(new Event("phx:show-start")),f.putSticky(t,"toggle",C=>C.style.display=s||"block"),t.dispatchEvent(new Event("phx:show-end"))})},addOrRemoveClasses(i,e,t,s,n,r){let[o,a,l]=s||[[],[],[]];if(o.length>0){let d=()=>this.addOrRemoveClasses(i,a.concat(o),[]),v=()=>this.addOrRemoveClasses(i,e.concat(l),t.concat(o).concat(a));return r.transition(n,d,v)}window.requestAnimationFrame(()=>{let[d,v]=f.getSticky(i,"classes",[[],[]]),p=e.filter(w=>d.indexOf(w)<0&&!i.classList.contains(w)),_=t.filter(w=>v.indexOf(w)<0&&i.classList.contains(w)),C=d.filter(w=>t.indexOf(w)<0).concat(p),y=v.filter(w=>e.indexOf(w)<0).concat(_);f.putSticky(i,"classes",w=>(w.classList.remove(...y),w.classList.add(...C),[C,y]))})},setOrRemoveAttrs(i,e,t){let[s,n]=f.getSticky(i,"attrs",[[],[]]),r=e.map(([l,d])=>l).concat(t),o=s.filter(([l,d])=>!r.includes(l)).concat(e),a=n.filter(l=>!r.includes(l)).concat(t);f.putSticky(i,"attrs",l=>(a.forEach(d=>l.removeAttribute(d)),o.forEach(([d,v])=>l.setAttribute(d,v)),[o,a]))},hasAllClasses(i,e){return e.every(t=>i.classList.contains(t))},isToggledOut(i,e){return!this.isVisible(i)||this.hasAllClasses(i,e)},filterToEls(i,{to:e}){return e?f.all(document,e):[i]}},de=no;var Yt=(i,e,t=[])=>{let s=new FormData(i),n=[];s.forEach((o,a,l)=>{o instanceof File&&n.push(a)}),n.forEach(o=>s.delete(o));let r=new URLSearchParams;for(let[o,a]of s.entries())(t.length===0||t.indexOf(o)>=0)&&r.append(o,a);for(let o in e)r.append(o,e[o]);return r.toString()},st=class{constructor(e,t,s,n,r){this.isDead=!1,this.liveSocket=t,this.flash=n,this.parent=s,this.root=s?s.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(o){o&&o()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(r),session:this.getSession(),static:this.getStatic(),flash:this.flash}))}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.getAttribute(Ye)!==null}connectParams(e){let t=this.liveSocket.params(this.el),s=f.all(document,`[${this.binding(Bs)}]`).map(n=>n.src||n.href).filter(n=>typeof n=="string");return s.length>0&&(t._track_static=s),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(le)}getStatic(){let e=this.el.getAttribute(Ie);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let s in this.viewHooks)this.destroyHook(this.viewHooks[s])};f.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Ni,Ut,Fi),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(Ut)}}execAll(e){f.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Ni),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,s=function(){}){this.liveSocket.transition(e,t,s)}withinTargets(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,s=>t(s,e));if(ve(e))f.findComponentNodeList(this.el,e).length===0?W(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let s=Array.from(document.querySelectorAll(e));s.length===0&&W(`nothing found matching the phx-target selector "${e}"`),s.forEach(n=>this.liveSocket.owner(n,r=>t(r,n)))}}applyDiff(e,t,s){this.log(e,()=>["",et(t)]);let{diff:n,reply:r,events:o,title:a}=yt.extract(t);a&&f.putTitle(a),s({diff:n,reply:r,events:o})}onJoin(e){let{rendered:t,container:s}=e;if(s){let[n,r]=s;this.el=f.replaceRootContainer(this.el,n,r)}this.childJoins=0,this.joinPending=!0,this.flash=null,ce.dropLocal(this.liveSocket.localStorage,window.location.pathname,Ht),this.applyDiff("mount",t,({diff:n,events:r})=>{this.rendered=new yt(this.id,n);let o=this.renderContainer(null,"join");this.dropPendingRefs();let a=this.formsForRecovery(o);this.joinCount++,a.length>0?a.forEach(([l,d,v],p)=>{this.pushFormRecovery(l,v,_=>{p===a.length-1&&this.onJoinComplete(_,o,r)})}):this.onJoinComplete(e,o,r)})}dropPendingRefs(){f.all(document,`[${Ae}="${this.id}"][${ae}]`,e=>{e.removeAttribute(ae),e.removeAttribute(Ae)})}onJoinComplete({live_patch:e},t,s){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,s);f.findPhxChildrenInFragment(t,this.id).filter(r=>{let o=r.id&&this.el.querySelector(`[id="${r.id}"]`),a=o&&o.getAttribute(Ie);return a&&r.setAttribute(Ie,a),this.joinChild(r)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,s)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,s)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,s)])}attachTrueDocEl(){this.el=f.byId(this.id),this.el.setAttribute(xe,this.root.id)}execNewMounted(){f.all(this.el,`[${this.binding(Qe)}], [data-phx-${Qe}]`,e=>{this.maybeAddNewHook(e)}),f.all(this.el,`[${this.binding(Bi)}]`,e=>this.maybeMounted(e))}applyJoinPatch(e,t,s){this.attachTrueDocEl();let n=new $e(this,this.el,this.id,t,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(s),this.applyPendingUpdates(),e){let{kind:r,to:o}=e;this.liveSocket.historyPatch(o,r)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let s=this.getHook(e),n=s&&f.isIgnored(e,this.binding(_t));if(s&&!e.isEqualNode(t)&&!(n&&on(e.dataset,t.dataset)))return s.__beforeUpdate(),s}maybeMounted(e){let t=e.getAttribute(this.binding(Bi)),s=t&&f.private(e,"mounted");t&&!s&&(this.liveSocket.execJS(e,t),f.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let s=this.addHook(e);s&&s.__mounted()}performPatch(e,t){let s=[],n=!1,r=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]),this.maybeAddNewHook(o),o.getAttribute&&this.maybeMounted(o)}),e.after("phxChildAdded",o=>{f.isPhxSticky(o)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(o,a)=>{this.triggerBeforeUpdateHook(o,a)&&r.add(o.id)}),e.after("updated",o=>{r.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{o.nodeType===Node.ELEMENT_NODE&&s.push(o)}),e.after("transitionsDiscarded",o=>this.afterElementsRemoved(o,t)),e.perform(),this.afterElementsRemoved(s,t),n}afterElementsRemoved(e,t){let s=[];e.forEach(n=>{let r=f.all(n,`[${Y}]`),o=f.all(n,`[${this.binding(Qe)}]`);r.concat(n).forEach(a=>{let l=this.componentID(a);ve(l)&&s.indexOf(l)===-1&&s.push(l)}),o.concat(n).forEach(a=>{let l=this.getHook(a);l&&this.destroyHook(l)})}),t&&this.maybePushComponentsDestroyed(s)}joinNewChildren(){f.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(ke)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let s in this.root.children[t])if(s===e)return this.root.children[t][s].destroy()}joinChild(e){if(!this.getChildById(e.id)){let s=new st(e,this.liveSocket,this);return this.root.children[this.id][s.id]=s,s.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let s=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{f.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(r=>{this.componentPatch(this.rendered.getComponent(e,r),r)&&(s=!0)})}):zi(e)||this.liveSocket.time("full patch complete",()=>{let n=this.renderContainer(e,"update"),r=new $e(this,this.el,this.id,n,null);s=this.performPatch(r,!0)}),this.liveSocket.dispatchEvents(t),s&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let s=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,r=this.rendered.toString(n);return`<${s}>${r}</${s}>`})}componentPatch(e,t){if(zi(e))return!1;let s=this.rendered.componentToString(t),n=new $e(this,this.el,this.id,s,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[Oe.elementID(e)]}addHook(e){if(Oe.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${Qe}`)||e.getAttribute(this.binding(Qe));if(t&&!this.ownsElement(e))return;let s=this.liveSocket.getHookCallbacks(t);if(s){e.id||W(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new Oe(this,e,s);return this.viewHooks[Oe.elementID(n.el)]=n,n}else t!==null&&W(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Oe.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[]}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,s=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(s)]):this.liveSocket.requestDOMUpdate(()=>t(s))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:s})=>this.update(t,s))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){for(let e in this.root.children[this.id])this.getChildById(e).destroy()}onLiveRedirect(e){let{to:t,kind:s,flash:n}=e,r=this.expandURL(t);this.liveSocket.historyRedirect(r,s,n)}onLivePatch(e){let{to:t,kind:s}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,s)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="unauthorized"||e.reason==="stale")return this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href});if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Qs)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||this.displayError()}displayError(){this.isMain()&&f.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(Ut,Fi),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,s,n=function(){}){if(!this.isConnected())return;let[r,[o],a]=e?e():[null,[],{}],l=function(){};return(a.page_loading||o&&o.getAttribute(this.binding(Mi))!==null)&&(l=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof s.cid!="number"&&delete s.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,s,en).receive("ok",d=>{let v=p=>{d.redirect&&this.onRedirect(d.redirect),d.live_patch&&this.onLivePatch(d.live_patch),d.live_redirect&&this.onLiveRedirect(d.live_redirect),r!==null&&this.undoRefs(r),l(),n(d,p)};d.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",d.diff,({diff:p,reply:_,events:C})=>{this.update(p,C),v(_)})}):v(null)}))}undoRefs(e){!this.isConnected()||f.all(document,`[${Ae}="${this.id}"][${ae}="${e}"]`,t=>{let s=t.getAttribute(mt);t.removeAttribute(ae),t.removeAttribute(Ae),t.getAttribute(Bt)!==null&&(t.readOnly=!1,t.removeAttribute(Bt)),s!==null&&(t.disabled=s==="true",t.removeAttribute(mt)),Ot.forEach(o=>f.removeClass(t,o));let n=t.getAttribute(vt);n!==null&&(t.innerText=n,t.removeAttribute(vt));let r=f.private(t,ae);if(r){let o=this.triggerBeforeUpdateHook(t,r);$e.patchEl(t,r,this.liveSocket.getActiveElement()),o&&o.__updated(),f.deletePrivate(t,ae)}})}putRef(e,t,s={}){let n=this.ref++,r=this.binding(gt);return s.loading&&(e=e.concat(f.all(document,s.loading))),e.forEach(o=>{o.classList.add(`phx-${t}-loading`),o.setAttribute(ae,n),o.setAttribute(Ae,this.el.id);let a=o.getAttribute(r);a!==null&&(o.getAttribute(vt)||o.setAttribute(vt,o.innerText),a!==""&&(o.innerText=a),o.setAttribute("disabled",""))}),[n,e,s]}componentID(e){let t=e.getAttribute&&e.getAttribute(Y);return t?parseInt(t):null}targetComponentID(e,t,s={}){if(ve(t))return t;let n=e.getAttribute(this.binding("target"));return ve(n)?parseInt(n):t&&(n!==null||s.target)?this.closestComponentID(t):null}closestComponentID(e){return ve(e)?e:e?he(e.closest(`[${Y}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,s,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,s]),!1;let[r,o,a]=this.putRef([],"hook");return this.pushWithReply(()=>[r,o,a],"event",{type:"hook",event:t,value:s,cid:this.closestComponentID(e)},(l,d)=>n(d,r)),r}extractMeta(e,t,s){let n=this.binding("value-");for(let r=0;r<e.attributes.length;r++){t||(t={});let o=e.attributes[r].name;o.startsWith(n)&&(t[o.replace(n,"")]=e.getAttribute(o))}if(e.value!==void 0&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&Vt.indexOf(e.type)>=0&&!e.checked&&delete t.value),s){t||(t={});for(let r in s)t[r]=s[r]}return t}pushEvent(e,t,s,n,r,o={}){this.pushWithReply(()=>this.putRef([t],e,o),"event",{type:e,event:n,value:this.extractMeta(t,r,o.value),cid:this.targetComponentID(t,s,o)})}pushFileProgress(e,t,s,n=function(){}){this.liveSocket.withinOwners(e.form,(r,o)=>{r.pushWithReply(null,"progress",{event:e.getAttribute(r.binding(Gs)),ref:e.getAttribute(pe),entry_ref:t,progress:s,cid:r.targetComponentID(e.form,o)},n)})}pushInput(e,t,s,n,r,o){let a,l=ve(s)?s:this.targetComponentID(e.form,t),d=()=>this.putRef([e,e.form],"change",r),v;e.getAttribute(this.binding("change"))?v=Yt(e.form,{_target:r._target},[e.name]):v=Yt(e.form,{_target:r._target}),f.isUploadInput(e)&&e.files&&e.files.length>0&&B.trackFiles(e,Array.from(e.files)),a=B.serializeUploads(e);let p={type:"form",event:n,value:v,uploads:a,cid:l};this.pushWithReply(d,"event",p,_=>{if(f.showError(e,this.liveSocket.binding(pt)),f.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(B.filesAwaitingPreflight(e).length>0){let[C,y]=d();this.uploadFiles(e.form,t,C,l,w=>{o&&o(_),this.triggerAwaitingSubmit(e.form)})}}else o&&o(_)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[s,n,r,o]=t;this.cancelSubmit(e),o()}}getScheduledSubmit(e){return this.formSubmits.find(([t,s,n,r])=>t.isSameNode(e))}scheduleSubmit(e,t,s,n){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,s,n])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,s,n])=>t.isSameNode(e)?(this.undoRefs(s),!1):!0)}disableForm(e,t={}){let s=p=>!(Be(p,`${this.binding(_t)}=ignore`,p.form)||Be(p,"data-phx-update=ignore",p.form)),n=p=>p.hasAttribute(this.binding(gt)),r=p=>p.tagName=="BUTTON",o=p=>["INPUT","TEXTAREA","SELECT"].includes(p.tagName),a=Array.from(e.elements),l=a.filter(n),d=a.filter(r).filter(s),v=a.filter(o).filter(s);return d.forEach(p=>{p.setAttribute(mt,p.disabled),p.disabled=!0}),v.forEach(p=>{p.setAttribute(Bt,p.readOnly),p.readOnly=!0,p.files&&(p.setAttribute(mt,p.disabled),p.disabled=!0)}),e.setAttribute(this.binding(Mi),""),this.putRef([e].concat(l).concat(d).concat(v),"submit",t)}pushFormSubmit(e,t,s,n,r){let o=()=>this.disableForm(e,n),a=this.targetComponentID(e,t);if(B.hasUploadsInProgress(e)){let[l,d]=o(),v=()=>this.pushFormSubmit(e,t,s,n,r);return this.scheduleSubmit(e,l,n,v)}else if(B.inputsAwaitingPreflight(e).length>0){let[l,d]=o(),v=()=>[l,d,n];this.uploadFiles(e,t,l,a,p=>{let _=Yt(e,{});this.pushWithReply(v,"event",{type:"form",event:s,value:_,cid:a},r)})}else{let l=Yt(e,{});this.pushWithReply(o,"event",{type:"form",event:s,value:l,cid:a},r)}}uploadFiles(e,t,s,n,r){let o=this.joinCount,a=B.activeFileInputs(e),l=a.length;a.forEach(d=>{let v=new B(d,this,()=>{l--,l===0&&r()});this.uploaders[d]=v;let p=v.entries().map(C=>C.toPreflightPayload()),_={ref:d.getAttribute(pe),entries:p,cid:this.targetComponentID(d.form,t)};this.log("upload",()=>["sending preflight request",_]),this.pushWithReply(null,"allow_upload",_,C=>{if(this.log("upload",()=>["got preflight response",C]),C.error){this.undoRefs(s);let[y,w]=C.error;this.log("upload",()=>[`error for entry ${y}`,w])}else{let y=w=>{this.channel.onError(()=>{this.joinCount===o&&w()})};v.initAdapterUpload(C,y,this.liveSocket)}})})}dispatchUploads(e,t){let s=f.findUploadInputs(this.el).filter(n=>n.name===e);s.length===0?W(`no live file inputs found matching the name "${e}"`):s.length>1?W(`duplicate live file inputs found matching the name "${e}"`):f.dispatchEvent(s[0],Nt,{detail:{files:t}})}pushFormRecovery(e,t,s){this.liveSocket.withinOwners(e,(n,r)=>{let o=e.elements[0],a=e.getAttribute(this.binding(ji))||e.getAttribute(this.binding("change"));de.exec("change",a,n,o,["push",{_target:o.name,newCid:t,callback:s}])})}pushLinkPatch(e,t,s){let n=this.liveSocket.setPendingLink(e),r=t?()=>this.putRef([t],"click"):null,o=()=>this.liveSocket.redirect(window.location.href),a=this.pushWithReply(r,"live_patch",{url:e},l=>{this.liveSocket.requestDOMUpdate(()=>{l.link_redirect?this.liveSocket.replaceMain(e,null,s,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),s&&s(n))})});a?a.receive("timeout",o):o()}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),s=document.createElement("template");return s.innerHTML=e,f.all(this.el,`form[${t}]`).filter(n=>n.id&&this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(ji))!=="ignore").map(n=>{let r=s.content.querySelector(`form[id="${n.id}"][${t}="${n.getAttribute(t)}"]`);return r?[n,r,this.targetComponentID(r)]:[n,null,null]}).filter(([n,r,o])=>r)}maybePushComponentsDestroyed(e){let t=e.filter(s=>f.findComponentNodeList(this.el,s).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let s=t.filter(n=>f.findComponentNodeList(this.el,n).length===0);s.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:s},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){return this.isDead||e.getAttribute(ke)===this.id||he(e.closest(Ce),t=>t.id)===this.id}submitForm(e,t,s,n={}){f.putPrivate(e,jt,!0);let r=this.liveSocket.binding(pt),o=Array.from(e.elements);this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,s,n,()=>{o.forEach(a=>f.showError(a,r)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}};var wt=class{constructor(e,t,s={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,s),this.bindingPrefix=s.bindingPrefix||Zs,this.opts=s,this.params=Kt(s.params||{}),this.viewLogger=s.viewLogger,this.metadataCallbacks=s.metadata||{},this.defaults=Object.assign(et(tn),s.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=et(window.location),this.hooks=s.hooks||{},this.uploaders=s.uploaders||{},this.loaderTimeout=s.loaderTimeout||Ys,this.reloadWithJitterTimer=null,this.maxReloads=s.maxReloads||Us,this.reloadJitterMin=s.reloadJitterMin||Fs,this.reloadJitterMax=s.reloadJitterMax||Vs,this.failsafeJitter=s.failsafeJitter||js,this.localStorage=s.localStorage||window.localStorage,this.sessionStorage=s.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:Kt(),onBeforeElUpdated:Kt()},s.dom||{}),this.doofinderMount=s.doofinderMount,this.connectCallback=s.connectCallback||(()=>{}),this.disconnectCallback=s.disconnectCallback||(()=>{}),this.transitions=new mn,window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()?window.location.reload():this.connectCallback()})}isProfileEnabled(){return this.sessionStorage.getItem($t)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(bt)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(bt)==="false"}enableDebug(){this.sessionStorage.setItem(bt,"true")}enableProfiling(){this.sessionStorage.setItem($t,"true")}disableDebug(){this.sessionStorage.setItem(bt,"false")}disableProfiling(){this.sessionStorage.removeItem($t)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Xt,e)}disableLatencySim(){this.sessionStorage.removeItem(Xt)}getLatencySim(){let e=this.sessionStorage.getItem(Xt);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug(),(()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.joinDeadView()})()}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,s=null){this.owner(e,n=>de.exec(s,t,n,e))}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let s=t();return console.timeEnd(e),s}log(e,t,s){if(this.viewLogger){let[n,r]=s();this.viewLogger(e,t,n,r)}else if(this.isDebugEnabled()){let[n,r]=s();rn(e,t,n,r)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,s=function(){}){this.transitions.addTransition(e,t,s)}onChannel(e,t,s){e.on(t,n=>{let r=this.getLatencySim();r?setTimeout(()=>s(n),r):s(n)})}wrapPush(e,t,s){let n=this.getLatencySim(),r=e.joinCount;if(!n)return this.isConnected()&&t.timeout?s().receive("timeout",()=>{e.joinCount===r&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):s();let o={receives:[],receive(a,l){this.receives.push([a,l])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((a,[l,d])=>a.receive(l,d),s())},n),o}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let s=this.reloadJitterMin,n=this.reloadJitterMax,r=Math.floor(Math.random()*(n-s+1))+s;ce.updateLocal(this.localStorage,window.location.pathname,Ht,0,a=>a+1)>this.maxReloads&&(r=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{this.disconnectCallback()},r)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?hn[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){this.bindTopLevelEvents({dead:!0});let e=this.newRootView(document.body);e.setHref(this.getHref()),e.joinDead(),this.main=e,window.requestAnimationFrame(()=>e.execNewMounted())}joinRootViews(){let e=!1;if(this.doofinderMount){let t=this.newRootView(this.doofinderMount);t.setHref(this.getHref()),t.join(),this.main=t,e=!0}else f.all(document,`${Ce}:not([${ke}])`,t=>{if(!this.getRootById(t.id)){let s=this.newRootView(t);s.setHref(this.getHref()),s.join(),t.getAttribute(Ye)&&(this.main=s)}e=!0});return e}redirect(e,t){this.disconnect(this.disconnectCallback),ce.redirect(e,t)}replaceMain(e,t,s=null,n=this.setPendingLink(e)){let r=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let o=f.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,t,r),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((a,l)=>{a===1&&this.commitPendingLink(n)&&this.requestDOMUpdate(()=>{f.findPhxSticky(document).forEach(d=>o.appendChild(d)),this.outgoingMainEl.replaceWith(o),this.outgoingMainEl=null,s&&requestAnimationFrame(s),l()})})}transitionRemoves(e){let t=this.binding("remove");e=e||f.all(document,`[${t}]`),e.forEach(s=>{document.body.contains(s)&&this.execJS(s,s.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(le)!==null}newRootView(e,t,s){let n=new st(e,this,null,t,s);return this.roots[n.id]=n,n}owner(e,t){let s=he(e.closest(Ce),n=>this.getViewByEl(n))||this.main;s&&t(s)}withinOwners(e,t){this.owner(e,s=>t(s,e))}getViewByEl(e){let t=e.getAttribute(xe);return he(this.getRootById(t),s=>s.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(xe));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(t=>{t&&t.code===1e3&&this.main&&this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,s,n,r,o,a)=>{let l=r.getAttribute(this.binding(qs)),d=t.key&&t.key.toLowerCase();if(l&&l.toLowerCase()!==d)return;let v=U({key:t.key},this.eventMeta(s,t,r));de.exec(s,o,n,r,["push",{data:v}])}),this.bind({blur:"focusout",focus:"focusin"},(t,s,n,r,o,a)=>{if(!a){let l=U({key:t.key},this.eventMeta(s,t,r));de.exec(s,o,n,r,["push",{data:l}])}}),this.bind({blur:"blur",focus:"focus"},(t,s,n,r,o,a,l)=>{if(l==="window"){let d=this.eventMeta(s,t,r);de.exec(s,a,n,r,["push",{data:d}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let s=he(Be(t.target,this.binding(Hi)),o=>o.getAttribute(this.binding(Hi))),n=s&&document.getElementById(s),r=Array.from(t.dataTransfer.files||[]);!n||n.disabled||r.length===0||!(n.files instanceof FileList)||(B.trackFiles(n,r),n.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(Nt,t=>{let s=t.target;if(!f.isUploadInput(s))return;let n=Array.from(t.detail.files||[]).filter(r=>r instanceof File||r instanceof Blob);B.trackFiles(s,n),s.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,s){let n=this.metadataCallbacks[e];return n?n(t,s):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let s in e){let n=e[s];this.on(n,r=>{let o=this.binding(s),a=this.binding(`window-${s}`),l=r.target.getAttribute&&r.target.getAttribute(o);l?this.debounce(r.target,r,n,()=>{this.withinOwners(r.target,d=>{t(r,s,d,r.target,l,null)})}):f.all(document,`[${a}]`,d=>{let v=d.getAttribute(a);this.debounce(d,r,n,()=>{this.withinOwners(d,p=>{t(r,s,p,d,v,"window")})})})})}}bindClicks(){this.doofinderMount.addEventListener("click",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,s){let n=this.binding(t);(this.doofinderMount||window).addEventListener(e,o=>{if(!this.isConnected())return;let a=null;if(s)a=o.target.matches(`[${n}]`)?o.target:o.target.querySelector(`[${n}]`);else{let d=this.clickStartedAtTarget||o.target;a=Be(d,n),this.dispatchClickAway(o,d),this.clickStartedAtTarget=null}let l=a&&a.getAttribute(n);!l||(a.getAttribute("href")==="#"&&o.preventDefault(),!a.disabled&&this.debounce(a,o,"click",()=>{this.withinOwners(a,d=>{de.exec("click",l,d,a,["push",{data:this.eventMeta("click",o,a)}])})}))},s)}dispatchClickAway(e,t){let s=this.binding("click-away");f.all(document,`[${s}]`,n=>{n.isSameNode(t)||n.contains(t)||this.withinOwners(e.target,r=>{let o=n.getAttribute(s);de.isVisible(n)&&de.exec("click",o,r,n,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!ce.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{ce.updateCurrentState(s=>Object.assign(s,{scroll:window.scrollY}))},100)}),window.addEventListener("click",t=>{let s=Be(t.target,Mt),n=s&&s.getAttribute(Mt),r=t.metaKey||t.ctrlKey||t.button===1;if(!n||!this.isConnected()||!this.main||r)return;let o=s.href,a=s.getAttribute($s);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==o&&this.requestDOMUpdate(()=>{if(n==="patch")this.pushHistoryPatch(o,a,s);else if(n==="redirect")this.historyRedirect(o,a);else throw new Error(`expected ${Mt} to be "patch" or "redirect", got: ${n}`);let l=s.getAttribute(this.binding("click"));l&&this.requestDOMUpdate(()=>this.execJS(s,l,"click"))})},!1)}dispatchEvent(e,t={}){f.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,s])=>this.dispatchEvent(t,s))}withPageLoading(e,t){f.dispatchEvent(window,"phx:page-loading-start",{detail:e});let s=()=>f.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(s):s}pushHistoryPatch(e,t,s){if(!this.isConnected())return ce.redirect(e);this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,s,r=>{this.historyPatch(e,t,r),n()})})}historyPatch(e,t,s=this.setPendingLink(e)){!this.commitPendingLink(s)||(ce.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,s){if(!this.isConnected())return ce.redirect(e,s);if(/^\/[^\/]+.*$/.test(e)){let{protocol:r,host:o}=window.location;e=`${r}//${o}${e}`}let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},r=>{this.replaceMain(e,s,()=>{ce.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),r()})})}replaceRootHistory(){ce.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:s}=this.currentLocation;return t+s===e.pathname+e.search?!1:(this.currentLocation=et(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",s=>{let n=s.target.getAttribute(this.binding("submit")),r=s.target.getAttribute(this.binding("change"));!t&&r&&!n&&(t=!0,s.preventDefault(),this.withinOwners(s.target,o=>{o.disableForm(s.target),window.requestAnimationFrame(()=>s.target.submit())}))},!0),this.on("submit",s=>{let n=s.target.getAttribute(this.binding("submit"));!n||(s.preventDefault(),s.target.disabled=!0,this.withinOwners(s.target,r=>{de.exec("submit",n,r,s.target,["push",{}])}))},!1);for(let s of["change","input"])this.on(s,n=>{let r=this.binding("change"),o=n.target,a=o.getAttribute(r),l=o.form&&o.form.getAttribute(r),d=a||l;if(!d||o.type==="number"&&o.validity&&o.validity.badInput)return;let v=a?o:o.form,p=e;e++;let{at:_,type:C}=f.private(o,"prev-iteration")||{};_===p-1&&s!==C||(f.putPrivate(o,"prev-iteration",{at:p,type:s}),this.debounce(o,n,s,()=>{this.withinOwners(v,y=>{f.putPrivate(o,Ft,!0),f.isTextualInput(o)||this.setActiveElement(o),de.exec("change",d,y,o,["push",{_target:n.target.name,dispatcher:v}])})}))},!1)}debounce(e,t,s,n){if(s==="blur"||s==="focusout")return n();let r=this.binding(Js),o=this.binding(zs),a=this.defaults.debounce.toString(),l=this.defaults.throttle.toString();this.withinOwners(e,d=>{let v=()=>!d.isDestroyed()&&document.body.contains(e);f.debounce(e,t,r,a,o,l,v,()=>{n()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,s=>{this.silenced||t(s)})}},mn=class{constructor(){this.transitions=new Set,this.pendingOps=[],this.reset()}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,s){t();let n=setTimeout(()=>{this.transitions.delete(n),s(),this.size()===0&&this.flushPendingOps()},e);this.transitions.add(n)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){this.pendingOps.forEach(e=>e()),this.pendingOps=[]}};var Qt=class{constructor(e,t){this._bucket=e,this._store=t||window.localStorage}get data(){return JSON.parse(this._store.getItem(this._bucket))||{}}set data(e){this._store.setItem(this._bucket,JSON.stringify(e))}getItem(e){return this.data[e]}setItem(e,t){let s=this.data;s[e]=t,this.data=s}removeItem(e){let t=this.data;delete t[e],this.data=t}clear(){this.data={}}destroy(){this._store.removeItem(this._bucket)}popItem(e){let t=this.data,s=t[e];return delete t[e],this.data=t,s}};var Yi="dfd-animate",Qi="dfd-fixed-layout",Pe="hidden",Zt="floating",ei="fullscreen",Xe="static";function ti(i){let e=["left","top","right","bottom","width","height","scrollLeft","scrollTop","scrollWidth","scrollHeight"],t=e.reduce((n,r)=>(n[r]=0,n),{}),s=i;if(s===window)t=ye(U({},t),{width:s.outerWidth,height:s.outerHeight,clientWidth:s.innerWidth,clientHeight:s.innerHeight,scrollLeft:s.scrollX,scrollTop:s.scrollY,scrollWidth:document.scrollWidth,scrollHeight:document.scrollHeight});else{if(s===document)s=document.documentElement,t=ye(U({},t),{width:s.offsetWidth,height:s.offsetHeight});else if(s.getBoundingClientRect){let n=s.getBoundingClientRect();t=e.reduce((r,o)=>(r[o]=n[o],r),{})}t=ye(U({},t),{clientWidth:s.clientWidth,clientHeight:s.clientHeight,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollWidth:s.scrollWidth,scrollHeight:s.scrollHeight})}return t}function gn(i){let e=i;for(;e&&getComputedStyle(e).position!=="fixed";)e=e.offsetParent;return!!e}"use strict";var Zi=class{constructor(e,t={}){this.options=U({align:t.align,offsetX:0,offsetY:4,marginY:20,marginX:20,fillViewPortWidth:768},t),this.element=e}__origin__(e){let t=ti(e),s=ti(document),n=s.width<=this.options.fillViewPortWidth,r={width:t.width,top:t.top+t.height,left:t.left,fixed:gn(e),align:function(){let o=Math.abs(t.left)*100/s.width,a=Math.abs(s.clientWidth-t.right)*100/s.width;switch(!0){case n:case Math.abs(o-a)<=15:return"center";case o<a:return"left";default:return"right"}}(),fillViewPort:n};return r.fixed||(r.top+=Math.abs(s.scrollTop),r.left+=Math.abs(s.scrollLeft)),r}update(e){let t=this.__origin__(e),s=document.documentElement,n=this.options.align||t.align,r=s.clientHeight-t.top-this.options.marginY,o=this.options.offsetX,a=this.options.offsetY;if(this.element.style.maxWidth=null,this.element.style.height=null,n!=="center"&&(this.element.style.marginLeft=null),this.element.style.position=t.fixed?"fixed":"absolute",n==="left"){let l=s.clientWidth-t.left-this.options.marginX,d=t.left;this.element.style.maxWidth=`${l-o}px`,this.element.style.left=`${d+o}px`,this.element.style.right=null}else if(n==="right"){let l=t.left+t.width-this.options.marginX+o,d=s.clientWidth-t.left-t.width;this.element.style.maxWidth=`${l+o}px`,this.element.style.right=`${d-o}px`,this.element.style.left=null}else{let l=s.clientWidth-t.left-t.width,d=Math.min(this.options.marginX,t.left,l);this.element.style.maxWidth=`${s.clientWidth-2*d}px`,this.element.style.left="50%",this.element.style.marginLeft=`-${ti(this.element).width/2}px`}this.element.style.top=`${t.top+a}px`,this.element.style.height=`${r-a}px`}destroy(){["position","top","left","right","height","maxWidth","marginLeft"].forEach(e=>this.element.style[e]=null),this.options=null,this.element=null}};function ii(i,e=66,t=!1){let s;return function(...n){s?Date.now()-s>=e?(i(...n),s=Date.now()):t&&console.log("throttle: discard execution"):(i(...n),s=Date.now())}}var We=class{constructor(e){this.mount=e,this._positionReference=null}__animate__(){return new Promise(e=>{setTimeout(()=>{this.mount.classList.add(Yi),e()},10)})}get positionReference(){return this._positionReference}show(){return I(this,null,function*(){let e=this.hidden();return e&&(this.mount.removeAttribute(Pe),yield this.__animate__()),e})}hide(){return I(this,null,function*(){let e=!this.hidden();return e&&(this.mount.setAttribute(Pe,""),this.mount.classList.remove(Yi),this.mount.innerHTML=""),e})}updatePosition(e){return I(this,null,function*(){this._positionReference=e.positionReference})}destroy(){this.mount=void 0}hidden(){return this.mount.hasAttribute(Pe)}};var es=class extends We{constructor(e,t={}){super(e);this.handleWindowChange=ii(this.handleWindowChange.bind(this)),this._position=new Zi(this.mount,t)}__addListeners__(){window.addEventListener("resize",this.handleWindowChange,{passive:!0})}__removeListeners__(){window.removeEventListener("resize",this.handleWindowChange)}get position(){return this._position}handleWindowChange(){this._position.update(this._positionReference)}show(){var e=t=>super[t];return I(this,null,function*(){let s=this.hidden();return s&&(this.mount.style.opacity="0",this.mount.removeAttribute(Pe)),this._position.update(this._positionReference),s&&(this.mount.setAttribute(Pe,""),this.mount.style.opacity=null,yield e("show").call(this),this.__addListeners__()),s})}hide(){var e=t=>super[t];return I(this,null,function*(){let s=!this.hidden();return s&&(this.__removeListeners__(),yield e("hide").call(this)),s})}updatePosition(e){var t=s=>super[s];return I(this,null,function*(){t("updatePosition").call(this,e),this._position.update(this._positionReference)})}destroy(){this.__removeListeners__(),this._position.destroy(),this._position=null,super.destroy()}};var ts=class extends We{show(){var e=t=>super[t];return I(this,null,function*(){let s=this.hidden();return s&&(document.documentElement.classList.add(Qi),yield e("show").call(this)),s})}hide(){var e=t=>super[t];return I(this,null,function*(){let s=yield e("hide").call(this);return s&&document.documentElement.classList.remove(Qi),s})}};function si(i=8){let e="";for(;e.length<i;)e=`${e}${Math.random().toString(36).substring(2)}`;return e.substr(0,i)}var ro=10,oo=500;function is(i,e={}){let t=document.querySelector(i);return t?Promise.resolve(t):new Promise((s,n)=>{let r=0,o=null,a=e.interval||oo,l=e.times||ro;o=setInterval(function(){r++<l?(t=document.querySelector(i),t&&(clearInterval(o),s(t))):(clearInterval(o),n(`selector '${i}' not found`))},a)})}var ss="data-dfd-id",ni="data-dfd-display",ri="data-dfd-mount-id",oi="wrapper",ai="wrapper-source",ao=`insertion method should be one of ${["append","prepend","before","after","replace","replace-content"].join(" | ")}`,ns=class{constructor(e,t=Xe,s={}){this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._screenType=null,this._theme=null,this._mount=e,this._displayMethod=null,this.setType(t,s)}__place__(){return I(this,arguments,function*(e={}){if(!(e.insertionPoint===this._insertionPoint&&e.insertionMethod===this._insertionMethod)){this._insertionPoint=e.insertionPoint||"body",this._insertionMethod=this.__resolveInsertionMethod__(e.insertionMethod);try{this.__placeMount__()}catch(t){console.warn("insertion point not found, falling back to body",t),this._insertionPoint="body",this._insertionMethod="append",this.__placeMount__()}}})}__resolveInsertionMethod__(e="append"){return this._insertionPoint==="body"&&!["append","prepend"].includes(e)?"append":e}__resolveInsertionPoint__(){return I(this,null,function*(){let e=yield is(this._insertionPoint);return this._insertionMethod==="replace"?this.__wrapMount__(e):(this.__unwrapMount__(),e)})}__resolveInsertionPosition__(){switch(this._insertionMethod){case"before":return"beforebegin";case"replace":case"replace-content":case"prepend":return"afterbegin";case"append":return"beforeend";case"after":return"afterend";default:throw ao}}__placeMount__(){return I(this,null,function*(){let e=yield this.__resolveInsertionPoint__(),t=this.__resolveInsertionPosition__();this._insertionMethod==="replace-content"&&(e.innerHTML=""),e.insertAdjacentElement(t,this._mount)})}__getWrapperElement__(e){return document.querySelector(`[${ni}="${e}"][${ri}="${this._mount.id}"]`)}__ensureElementId__(e){return e.setAttribute("id",e.getAttribute("id")||`dfd-${si(16)}`),e.getAttribute("id")}__wrapMount__(e){let t=this.__ensureElementId__(e),s=e.cloneNode(!1);return s.setAttribute(ss,t),s.setAttribute(ni,oi),s.setAttribute(ri,this._mount.id),e.setAttribute(ss,t),e.setAttribute(ni,ai),e.setAttribute(ri,this._mount.id),e.insertAdjacentElement("beforebegin",s),this.__updateWrap__(),s}__unwrapMount__(){let e=this.__getWrapperElement__(oi),t=this.__getWrapperElement__(ai);e&&(e.insertAdjacentElement("beforebegin",this._mount),e.remove(),t&&(t.setAttribute("id",t.dataset.dfdId),t.removeAttribute(ss),t.removeAttribute(ni),t.removeAttribute(ri),t.removeAttribute("hidden")))}__updateWrap__(){let e=this.__getWrapperElement__(this.hidden?ai:oi),t=this.__getWrapperElement__(this.hidden?oi:ai);!e||!t||(e.setAttribute("id",e.dataset.dfdId),e.removeAttribute("hidden"),t.removeAttribute("id"),t.setAttribute("hidden",""))}get type(){return this._type}get method(){return this._displayMethod}get hidden(){return this._displayMethod.hidden()}get screenType(){return this._screenType}set screenType(e){this._mount.setAttribute("data-dfd-screen",e),this._screenType=e}show(){return I(this,null,function*(){yield this._displayMethod.show(),this.__updateWrap__()})}hide(){return I(this,null,function*(){yield this._displayMethod.hide(),this.__updateWrap__()})}setType(e,t={}){var s;if(e!==this._type)switch(this._type=e,(s=this._displayMethod)==null||s.destroy(),e){case Zt:this._displayMethod=new es(this._mount,{align:t.align});break;case ei:this._displayMethod=new ts(this._mount);break;case Xe:default:this._displayMethod=new We(this._mount)}this.__place__(t.placement)}updateTheme(e){if(e!==this._theme){let t=`dfd-${e}`,s=`dfd-${this._theme}`;e&&this._theme?this._mount.classList.replace(s,t):e?this._mount.classList.add(t):this._theme&&this._mount.classList.remove(s),this._theme=e}}updatePosition(e){var t;(t=this._displayMethod)==null||t.updatePosition(e)}destroy(){return I(this,null,function*(){var e;yield this.hide(),(e=this._displayMethod)==null||e.destroy(),this._displayMethod=null,this._mount=null,this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._theme=null})}};var rs=class{constructor(e){this.eventTarget=e}on(e,t){return this.eventTarget.addEventListener(e,t,{passive:!0}),()=>this.off(e,t)}once(e,t){return this.eventTarget.addEventListener(e,t,{once:!0,passive:!0}),()=>this.off(e,t)}off(e,t){this.eventTarget.removeEventListener(e,t)}emit(e,t){let s=new CustomEvent(e,{detail:t,bubbles:!1,cancelable:!1,composed:!1});this.eventTarget.dispatchEvent(s)}};"use strict";var os=window.history,as=class{constructor({installationId:e,autoload:t,urlHash:s}){this._installationId=e,this._autoload=t?Object.freeze(t):null,this._urlHash=s,this._initialState=null}getQueryParamValue(){return this._autoload?new URLSearchParams(window.location.search).get(this._autoload.param):null}get hasQueryParam(){return this.getQueryParamValue()!==null}get(){return this.__fromHash__()||this.__fromQuery__()||this.__fromURL__()||null}replace(e){os.replaceState(e,"",this._urlHash?e:"")}save(e){let t=os.state;e!==t&&(this.valid(t)||(this._initialState=t),os.pushState(e,"",this._urlHash?e:""))}valid(e){return typeof e=="string"&&e.startsWith(`#/${this._installationId}/`)}validEvent({state:e}){let t=this.valid(e);switch(!0){case(this._initialState===null&&!t):case this._initialState===e:case(this._initialState&&e&&this._initialState.toString()===e.toString()):return!1;default:return t}}__fromHash__(){return this.valid(window.location.hash)?`#${window.location.hash.split("#",2)[1]}`:null}__fromQuery__(){if(!this._autoload)return;let e=this.getQueryParamValue();return e!=null?`#/${this._installationId}/${this._autoload.screen}/query=${e.trim()}`:null}__fromURL__(){return this._autoload?this._autoload.urls.find(t=>location.pathname.search(t)===0)?`#/${this._installationId}/${this._autoload.screen}/`:null:void 0}};var ls="__DF_DEBUG_MODE__",vn="true",li=window.sessionStorage;function _n(){li.setItem(ls,vn)}function bn(){li.removeItem(ls)}function lo(){return li.getItem(ls)===vn}function En(i){return li.getItem(i)||window[i]}function ue(...i){lo()&&console.log("[doofinder]",...i)}var hs="df:trigger:click",Ct="df:trigger:focus",Tt="df:trigger:input",cs="df:trigger:submit";var hi=1;"use strict";var ho="[dfd-carousel-btn-left]",co="[dfd-carousel-btn-right]",uo="[dfd-carousel-content]",Sn={mounted(){this.btnLeftEl=this.el.querySelector(ho),this.btnRightEl=this.el.querySelector(co),this.contentEl=this.el.querySelector(uo),this.getVisibleChildren=()=>{let i=this.contentEl.getBoundingClientRect();return Array.from(this.contentEl.children).filter(e=>{let t=e.getBoundingClientRect();return i.left<=t.left&&i.right>=t.right})},this.nextPage=()=>{let i=this.getVisibleChildren();if(i.length>0){let e=i.slice(-1).pop(),t=e.nextElementSibling;if(t){let s=this.contentEl.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=this.contentEl.scrollLeft+(n.x-s.x),a=n.width,l=t?r.x-n.x-n.width:0;this.contentEl.scroll({left:o+a+l/2,behavior:"smooth"})}}},this.previousPage=()=>{let i=this.getVisibleChildren();if(i.length>0){let e=i[0],t=e.previousElementSibling;if(t){let s=this.contentEl.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=this.contentEl.scrollLeft-s.width,a=r.width-(s.x-r.x),l=t?n.x-r.x-r.width:0;this.contentEl.scroll({left:o+a+l/2,behavior:"smooth"})}}},this.btnLeftEl.addEventListener("click",this.previousPage),this.btnRightEl.addEventListener("click",this.nextPage)},destroyed(){this.btnLeftEl.removeEventListener("click",this.previousPage),this.btnRightEl.removeEventListener("click",this.nextPage)}};var ci=240;function yn(i,e,t){return I(this,null,function*(){if(!fo(t))throw"invalid image, can't search";let s=`https://${e}-widget.doofinder.com/visual/search_img`,n="POST",r=new FormData;return r.append("hashid",i),r.append("img",yield po(t)),yield(yield fetch(s,{method:n,body:r,mode:"cors"})).json()})}function fo(i){return!!i.type.match(/image\/.*/)}function po(i){return I(this,null,function*(){let e=yield mo(i);return yield go(e)})}function mo(i){return new Promise(function(e,t){let s=new FileReader;s.onload=function(){e(s.result)},s.onerror=function(){t(s.error)},s.readAsDataURL(i)})}function go(i){return new Promise(function(e,t){let s=new Image;s.onload=function(){let n=document.createElement("canvas");n.width=ci,n.height=ci,n.getContext("2d").drawImage(s,0,0,ci,ci),n.toBlob(function(r){e(r)},"image/jpeg")},s.onerror=function(n){t("resize image error")},s.src=i})}var wn={mounted(){this.search=i=>I(this,null,function*(){let e=this.tag.hashid,t=this.tag.zone;this.el.dataset.status="loading";let{dfids:s}=yield yn(e,t,i);this.pushEvent("search",{search:{dfids:s}})}),this.el.addEventListener("change",i=>this.search(i.target.files[0]))}};function ds(i){setTimeout(()=>{i.focus(),i.selectionStart=i.selectionEnd=i.value.length},0)}"use strict";var Cn={mounted(){this.search=i=>{let e=this.el.dataset.dfdAction||"search";this.pushEvent(e,{search:{query:i}})},this.handleEvent("set-input-focus",()=>ds(this.el)),this.handleEvent("unset-input-focus",()=>{var i;return(i=document.activeElement)==null?void 0:i.blur()}),this.el.addEventListener("input",()=>this.search(this.el.value)),this.el.addEventListener("keydown",i=>{let e=this.el.getAttribute("dfd-value-suggestion");i.key==="Tab"&&e&&e!==this.el.value&&(this.el.value=e,ds(this.el),this.search(e))})}};var nt=class{constructor(e={}){e=Object.assign({resolveTimeout:null,resolveValue:!0,rejectTimeout:null,rejectValue:!1},e),this._promise=new Promise((o,a)=>{this.resolve=o,this.reject=a}),this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="Promise";let{resolveTimeout:t,resolveValue:s,rejectTimeout:n,rejectValue:r}=e;t&&setTimeout(()=>this.resolve(s),t),n&&setTimeout(()=>this.reject(r),n)}};"use strict";var di="doofinder.cart.add.click",vo="doofinder.cart.add",Tn={mounted(){this.close=()=>this.pushEvent("close-layer"),this.handleEvent("history-go",({n:i})=>{history.go(i)}),this.handleEvent("close",()=>{this.tag.disconnect()}),this.handleEvent("save-state",({state:i})=>{this.tag.state.save(i)}),this.handleEvent("replace-state",({state:i})=>{this.tag.state.replace(i)}),this.handleEvent("disconnect",i=>{i.errors.forEach(e=>console.error("[Doofinder] error:",e)),this.tag.destroy()}),this.handleEvent("load",i=>{this.tag.onLoad(i),this.pushEvent("ready")}),this.handleEvent("click-suggestion",i=>I(this,null,function*(){var e;this.tag.trigger.updateQuery((e=i==null?void 0:i.search)==null?void 0:e.query)})),this.handleEvent("update-latest-searches",({entries:i})=>{this.tag.updateLatestSearches(i)}),this.el.addEventListener("contextmenu",i=>{let e=i.target.closest('[dfd-click="item-click"]');if(e){let t=e.getAttribute("dfd-value-link"),s=e.getAttribute("dfd-value-dfid");this.pushEvent("item-click",{link:t,dfid:s},()=>{this.debug(`item-click sent for ${s} to ${t}`)})}}),this.el.addEventListener("error",({target:i})=>{if(i.tagName!=="IMG")return;let e=i.closest('[data-dfd-role="card-thumbnail"]');setTimeout(()=>{e==null||e.parentElement.setAttribute("dfd-update","ignore"),e==null||e.classList.add("dfd-card-thumbnail-404")},1)},!0),this.applyOperationBySelector=function(i,e){if(i.startsWith("#")){let t=getElementById(i);e(t)}else this.el.querySelectorAll(i).forEach(t=>{e(t)})},this.handleEvent("dom:add-class",({target:i,newClass:e})=>{this.applyOperationBySelector(i.selector,t=>t==null?void 0:t.classList.add(e))}),this.handleEvent("dom:remove-class",({target:i,oldClass:e})=>{this.applyOperationBySelector(i.selector,t=>t==null?void 0:t.classList.remove(e))}),this.handleEvent("dom:add-attribute",({target:i,name:e,value:t})=>{this.applyOperationBySelector(i.selector,s=>s==null?void 0:s.setAttribute(e,t))}),this.handleEvent("dom:remove-attribute",({target:i,name:e})=>{this.applyOperationBySelector(i.selector,t=>t==null?void 0:t.removeAttribute(e))}),this.handleEvent("redirection:update",({redirection:i})=>{this.tag.trigger.redirection=i}),this.addToCartResolveTimeout=3e3,this.addToCartRejectTimeout=5e3,this.addToCartButtonFeedback=function(i,e){let t=_o.bind(null,i,e),s=So.bind(null,i,i.innerHTML),n=bo.bind(null,i,s),r=Eo.bind(null,i,s);t().then(n,r)},this.handleCartAddClick=i=>{let e=i.detail.target?document.getElementById(i.detail.target.id):i.target,t=new nt({resolveTimeout:this.addToCartResolveTimeout,rejectTimeout:this.addToCartRejectTimeout});t.then(s=>{this.pushEvent("add-to-cart",i.detail.item,()=>{typeof s=="function"&&s()})},s=>{typeof s=="function"&&s()}),setTimeout(()=>this.tag.dispatch(vo,ye(U({},i.detail.item),{statusPromise:t})),1e3),this.addToCartButtonFeedback&&this.addToCartButtonFeedback(e,t)},window.addEventListener(di,this.handleCartAddClick),window.addEventListener(`phx:${di}`,this.handleCartAddClick)},destroyed(){window.removeEventListener(di,this.handleCartAddClick),window.removeEventListener(`phx:${di}`,this.handleCartAddClick)}},us="dfd-btn-loading",An="dfd-btn-done",kn="dfd-btn-error";function _o(i,e){return i.setAttribute("disabled",""),i.setAttribute("dfd-update","ignore"),i.innerHTML="",i.classList.add(us),e}function bo(i,e){i.classList.remove(us),i.classList.add(An),setTimeout(e,1e3)}function Eo(i,e){i.classList.remove(us),i.classList.add(kn),setTimeout(e,2e3)}function So(i,e){i.classList.remove(An),i.classList.remove(kn),i.innerHTML=e,i.removeAttribute("dfd-update"),i.removeAttribute("disabled")}var xn=Object.freeze({Linear:function(i){return i},EaseInQuad:function(i){return i*i},EaseOutQuad:function(i){return i*(2-i)},EaseInOutQuad:function(i){return i<.5?2*i*i:-1+(4-2*i)*i},EaseInCubic:function(i){return i*i*i},EaseOutCubic:function(i){return--i*i*i+1},EaseInOutCubic:function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},EaseInQuart:function(i){return i*i*i*i},EaseOutQuart:function(i){return 1- --i*i*i*i},EaseInOutQuart:function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},EaseInQuint:function(i){return i*i*i*i*i},EaseOutQuint:function(i){return 1+--i*i*i*i*i},EaseInOutQuint:function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i}});function Pn(i,e,t,s,n=xn.EaseInQuint){let r=Date.now(),o=e[i];return new Promise((a,l)=>{function d(){let v=Date.now(),p=Math.min(1,(v-r)/s),_=n(p);e[i]=o+_*(t-o),p<1?requestAnimationFrame(d):a()}o===t?a():requestAnimationFrame(d)})}var Ln=Pn.bind(null,"scrollTop"),yh=Pn.bind(null,"scrollLeft");function yo(i){let e=i.scrollHeight>i.clientHeight,s=window.getComputedStyle(i).overflowY.indexOf("hidden")!==-1;return e&&!s}function fs(i){return!i||i===document.documentElement?document.documentElement:yo(i)?i:fs(i.parentNode)}function Rn(i,e){return typeof i!="undefined"?i:e}var ui=class{constructor(e,t,s={}){let{threshold:n}=s;this.handleIntersection=this.handleIntersection.bind(this),this._callback=t,this._io=new IntersectionObserver(this.handleIntersection,{root:e,threshold:Rn(n,0)})}observe(e){this._io.disconnect(),e&&this._io.observe(e),ue("[ScrollObserver][observe]",e)}unobserve(){this._io.disconnect(),ue("[ScrollObserver][unobserve]")}handleIntersection([e]){ue("[ScrollObserver][intersection detected] target:",e.target),this._callback(e)}};var In='[data-dfd-role~="scroll-sentinel"]',wo='[data-dfd-role~="scroll-top-sentinel"]',Co="div.dfd-card";function fi(i,e,t){t?i.scrollTop=e:Ln(i,e,250)}function To(i){var s,n;let e=((s=document.querySelector(Co))==null?void 0:s.offsetHeight)||0,t=((n=document.querySelector(In))==null?void 0:n.offsetHeight)||0;return i.scrollHeight-t-e*2.6}var Dn={mounted(){this.sentinel=()=>this.el.querySelector(In),this.scrollTopSentinel=()=>this.el.querySelector(wo),this.scrollTarget=()=>this.el.dataset.dfdScrollTarget,this.refreshObservers=()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},this.changeBackToTopVisibility=i=>{this.pushEvent("change-back-to-top-visibility",{visible:i})},this.scrollObserver=new ui(this.el,({target:i,isIntersecting:e})=>{if(!e)return;let t={index:i.dataset.index};this.debug('[push] "load-more", params:',t),this.pushEvent("load-more",t)}),this.scrollTopObserver=new ui(this.el,({isIntersecting:i})=>{this.changeBackToTopVisibility(!i)}),this.handleEvent("search",i=>{this.debug('[handle] "search", params:',i);let{index:e,page:t}=i,s=this.sentinel();t===1&&e===(s==null?void 0:s.dataset.index)&&(this.changeBackToTopVisibility(!1),fi(this.el,0,!0)),this.refreshObservers()}),this.handleEvent("back-to-top",({id:i,fast:e})=>{this.debug(`[handle] "back-to-top", id: ${i}, fast: ${e}`),this.scrollTarget()==="window"?window.scrollTo(0,0):(!i||i===this.el.id)&&fi(this.el,0,!!e)}),this.handleEvent("change-current-index",()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel()),fi(this.el,0,!0)}),this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},destroyed(){this.scrollObserver.unobserve(),this.scrollObserver=null,this.scrollTopObserver.unobserve(),this.scrollTopObserver=null}},ps={mounted(){this.hideVirtualKeyboard=ii(()=>{let i=document.querySelector("input:focus");i?(this.debug("[hideVirtualKeyboard][blur] input:",i),i.blur()):this.debug("[hideVirtualKeyboard][noop]")},100),this.debug("[observe][touchstart] hideVirtualKeyboard()"),this.el.addEventListener("touchstart",this.hideVirtualKeyboard)},destroyed(){this.debug("[unobserve][touchstart] hideVirtualKeyboard()"),this.el.removeEventListener("touchstart",this.hideVirtualKeyboard)}},ms={mounted(){this.transientTargetCard=()=>this.el.querySelector(`[dfd-value-dfid="${this.tag.popTargetItemId()}"]`),this.handleEvent("update-scroll",i=>{this.debug('[handle] "update-scroll", params:',i);let e=this.transientTargetCard();setTimeout(()=>{e!=null?e.scrollIntoView({block:"center"}):i.scroll_end&&fi(fs(this.el),To(this.el),!1)},1e3)})}};function pi(i,e,t,s){return new Intl.NumberFormat(i,{style:"currency",maximumFractionDigits:parseInt(t,10),numberingSystem:s,currency:e})}function mi(i,e,t){return new Intl.NumberFormat(i,{maximumFractionDigits:parseInt(e,10),numberingSystem:t})}var gs=class{constructor(e,t,s,n,r){this.template=e,this.symbol=t,this.thousand=s,this.decimal=n,this.precision=r}format(e){let t=e<0,s=Math.pow(10,this.precision),n=(Math.round(e*s)/s).toFixed(this.precision),r=`${parseInt(Math.abs(n||0).toFixed(this.precision),10)}`,o=r.length>3?r.length%3:0,a=n.split(".")[1],l=[];return o>0&&l.push(`${r.substring(0,o)}${this.thousand}`),l.push(r.substring(o).replace(/(\d{3})(?=\d)/g,"$1"+this.thousand)),this.precision>0&&parseInt(a,10)>0&&l.push(`${this.decimal}${a}`),l=this.template.replace(/%s/g,this.symbol).replace(/%v/g,l.join("")),t&&(l=`-${l}`),l}};"use strict";var Me;(function(i){i.Range="range",i.Steps="steps",i.Positions="positions",i.Count="count",i.Values="values"})(Me||(Me={}));var te;(function(i){i[i.None=-1]="None",i[i.NoValue=0]="NoValue",i[i.LargeValue=1]="LargeValue",i[i.SmallValue=2]="SmallValue"})(te||(te={}));function Ao(i){return gi(i)&&typeof i.from=="function"}function gi(i){return typeof i=="object"&&typeof i.to=="function"}function Hn(i){i.parentElement.removeChild(i)}function vs(i){return i!=null}function On(i){i.preventDefault()}function ko(i){return i.filter(function(e){return this[e]?!1:this[e]=!0},{})}function xo(i,e){return Math.round(i/e)*e}function Po(i,e){var t=i.getBoundingClientRect(),s=i.ownerDocument,n=s.documentElement,r=Un(s);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(r.x=0),e?t.top+r.y-n.clientTop:t.left+r.x-n.clientLeft}function be(i){return typeof i=="number"&&!isNaN(i)&&isFinite(i)}function Mn(i,e,t){t>0&&(ee(i,e),setTimeout(function(){_i(i,e)},t))}function Nn(i){return Math.max(Math.min(i,100),0)}function vi(i){return Array.isArray(i)?i:[i]}function Lo(i){i=String(i);var e=i.split(".");return e.length>1?e[1].length:0}function ee(i,e){i.classList&&!/\s/.test(e)?i.classList.add(e):i.className+=" "+e}function _i(i,e){i.classList&&!/\s/.test(e)?i.classList.remove(e):i.className=i.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Ro(i,e){return i.classList?i.classList.contains(e):new RegExp("\\b"+e+"\\b").test(i.className)}function Un(i){var e=window.pageXOffset!==void 0,t=(i.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:t?i.documentElement.scrollLeft:i.body.scrollLeft,n=e?window.pageYOffset:t?i.documentElement.scrollTop:i.body.scrollTop;return{x:s,y:n}}function Io(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Do(){var i=!1;try{var e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,e)}catch(t){}return i}function Ho(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function _s(i,e){return 100/(e-i)}function bs(i,e,t){return e*100/(i[t+1]-i[t])}function Oo(i,e){return bs(i,i[0]<0?e+Math.abs(i[0]):e-i[0],0)}function Mo(i,e){return e*(i[1]-i[0])/100+i[0]}function At(i,e){for(var t=1;i>=e[t];)t+=1;return t}function No(i,e,t){if(t>=i.slice(-1)[0])return 100;var s=At(t,i),n=i[s-1],r=i[s],o=e[s-1],a=e[s];return o+Oo([n,r],t)/_s(o,a)}function Uo(i,e,t){if(t>=100)return i.slice(-1)[0];var s=At(t,e),n=i[s-1],r=i[s],o=e[s-1],a=e[s];return Mo([n,r],(t-o)*_s(o,a))}function Fo(i,e,t,s){if(s===100)return s;var n=At(s,i),r=i[n-1],o=i[n];return t?s-r>(o-r)/2?o:r:e[n-1]?i[n-1]+xo(s-i[n-1],e[n-1]):s}var Fn=function(){function i(e,t,s){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[s||!1],this.xNumSteps=[!1],this.snap=t;var n,r=[];for(Object.keys(e).forEach(function(o){r.push([vi(e[o]),o])}),r.sort(function(o,a){return o[0][0]-a[0][0]}),n=0;n<r.length;n++)this.handleEntryPoint(r[n][1],r[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}return i.prototype.getDistance=function(e){for(var t=[],s=0;s<this.xNumSteps.length-1;s++)t[s]=bs(this.xVal,e,s);return t},i.prototype.getAbsoluteDistance=function(e,t,s){var n=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[n+1];)n++;else e===this.xPct[this.xPct.length-1]&&(n=this.xPct.length-2);!s&&e===this.xPct[n+1]&&n++,t===null&&(t=[]);var r,o=1,a=t[n],l=0,d=0,v=0,p=0;for(s?r=(e-this.xPct[n])/(this.xPct[n+1]-this.xPct[n]):r=(this.xPct[n+1]-e)/(this.xPct[n+1]-this.xPct[n]);a>0;)l=this.xPct[n+1+p]-this.xPct[n+p],t[n+p]*o+100-r*100>100?(d=l*r,o=(a-100*r)/t[n+p],r=1):(d=t[n+p]*l/100*o,o=0),s?(v=v-d,this.xPct.length+p>=1&&p--):(v=v+d,this.xPct.length-p>=1&&p++),a=t[n+p]*o;return e+v},i.prototype.toStepping=function(e){return e=No(this.xVal,this.xPct,e),e},i.prototype.fromStepping=function(e){return Uo(this.xVal,this.xPct,e)},i.prototype.getStep=function(e){return e=Fo(this.xPct,this.xSteps,this.snap,e),e},i.prototype.getDefaultStep=function(e,t,s){var n=At(e,this.xPct);return(e===100||t&&e===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/s},i.prototype.getNearbySteps=function(e){var t=At(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},i.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Lo);return Math.max.apply(null,e)},i.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},i.prototype.convert=function(e){return this.getStep(this.toStepping(e))},i.prototype.handleEntryPoint=function(e,t){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!be(s)||!be(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(t[0]);var n=Number(t[1]);s?this.xSteps.push(isNaN(n)?!1:n):isNaN(n)||(this.xSteps[0]=n),this.xHighestCompleteStep.push(0)},i.prototype.handleStepPoint=function(e,t){if(!!t){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=bs([this.xVal[e],this.xVal[e+1]],t,0)/_s(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],n=Math.ceil(Number(s.toFixed(3))-1),r=this.xVal[e]+this.xNumSteps[e]*n;this.xHighestCompleteStep[e]=r}},i}(),Vn={to:function(i){return i===void 0?"":i.toFixed(2)},from:Number},jn={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ne={tooltips:".__tooltips",aria:".__aria"};function Vo(i,e){if(!be(e))throw new Error("noUiSlider: 'step' is not numeric.");i.singleStep=e}function jo(i,e){if(!be(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");i.keyboardPageMultiplier=e}function Bo(i,e){if(!be(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");i.keyboardMultiplier=e}function $o(i,e){if(!be(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");i.keyboardDefaultStep=e}function Xo(i,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");i.spectrum=new Fn(e,i.snap||!1,i.singleStep)}function Wo(i,e){if(e=vi(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");i.handles=e.length,i.start=e}function Ko(i,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");i.snap=e}function Jo(i,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");i.animate=e}function zo(i,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");i.animationDuration=e}function qo(i,e){var t=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<i.handles;s++)t.push(e);t.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==i.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t=e}i.connect=t}function Go(i,e){switch(e){case"horizontal":i.ort=0;break;case"vertical":i.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Bn(i,e){if(!be(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(i.margin=i.spectrum.getDistance(e))}function Yo(i,e){if(!be(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(i.limit=i.spectrum.getDistance(e),!i.limit||i.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Qo(i,e){var t;if(!be(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||be(e[0])||be(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),i.padding=[i.spectrum.getDistance(e[0]),i.spectrum.getDistance(e[1])],t=0;t<i.spectrum.xNumSteps.length-1;t++)if(i.padding[0][t]<0||i.padding[1][t]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],n=i.spectrum.xVal[0],r=i.spectrum.xVal[i.spectrum.xVal.length-1];if(s/(r-n)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Zo(i,e){switch(e){case"ltr":i.dir=0;break;case"rtl":i.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function ea(i,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var t=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,n=e.indexOf("fixed")>=0,r=e.indexOf("snap")>=0,o=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0,d=e.indexOf("smooth-steps")>=0;if(n){if(i.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Bn(i,i.start[1]-i.start[0])}if(a&&(i.margin||i.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");i.events={tap:t||r,drag:s,dragAll:l,smoothSteps:d,fixed:n,snap:r,hover:o,unconstrained:a}}function ta(i,e){if(e!==!1)if(e===!0||gi(e)){i.tooltips=[];for(var t=0;t<i.handles;t++)i.tooltips.push(e)}else{if(e=vi(e),e.length!==i.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!gi(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),i.tooltips=e}}function ia(i,e){if(e.length!==i.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");i.handleAttributes=e}function sa(i,e){if(!gi(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");i.ariaFormat=e}function na(i,e){if(!Ao(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");i.format=e}function ra(i,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");i.keyboardSupport=e}function oa(i,e){i.documentElement=e}function aa(i,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");i.cssPrefix=e}function la(i,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof i.cssPrefix=="string"?(i.cssClasses={},Object.keys(e).forEach(function(t){i.cssClasses[t]=i.cssPrefix+e[t]})):i.cssClasses=e}function $n(i){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Vn,format:Vn},t={step:{r:!1,t:Vo},keyboardPageMultiplier:{r:!1,t:jo},keyboardMultiplier:{r:!1,t:Bo},keyboardDefaultStep:{r:!1,t:$o},start:{r:!0,t:Wo},connect:{r:!0,t:qo},direction:{r:!0,t:Zo},snap:{r:!1,t:Ko},animate:{r:!1,t:Jo},animationDuration:{r:!1,t:zo},range:{r:!0,t:Xo},orientation:{r:!1,t:Go},margin:{r:!1,t:Bn},limit:{r:!1,t:Yo},padding:{r:!1,t:Qo},behaviour:{r:!0,t:ea},ariaFormat:{r:!1,t:sa},format:{r:!1,t:na},tooltips:{r:!1,t:ta},keyboardSupport:{r:!0,t:ra},documentElement:{r:!1,t:oa},cssPrefix:{r:!0,t:aa},cssClasses:{r:!0,t:la},handleAttributes:{r:!1,t:ia}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:jn,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};i.format&&!i.ariaFormat&&(i.ariaFormat=i.format),Object.keys(t).forEach(function(l){if(!vs(i[l])&&s[l]===void 0){if(t[l].r)throw new Error("noUiSlider: '"+l+"' is required.");return}t[l].t(e,vs(i[l])?i[l]:s[l])}),e.pips=i.pips;var n=document.createElement("div"),r=n.style.msTransform!==void 0,o=n.style.transform!==void 0;e.transformRule=o?"transform":r?"msTransform":"webkitTransform";var a=[["left","top"],["right","bottom"]];return e.style=a[e.dir][e.ort],e}function ha(i,e,t){var s=Io(),n=Ho(),r=n&&Do(),o=i,a,l,d,v,p,_=e.spectrum,C=[],y=[],w=[],H=0,x={},L=i.ownerDocument,$=e.documentElement||L.documentElement,g=L.body,R=L.dir==="rtl"||e.ort===1?0:100;function z(h,c){var u=L.createElement("div");return c&&ee(u,c),h.appendChild(u),u}function ne(h,c){var u=z(h,e.cssClasses.origin),m=z(u,e.cssClasses.handle);if(z(m,e.cssClasses.touchArea),m.setAttribute("data-handle",String(c)),e.keyboardSupport&&(m.setAttribute("tabindex","0"),m.addEventListener("keydown",function(b){return Er(b,c)})),e.handleAttributes!==void 0){var E=e.handleAttributes[c];Object.keys(E).forEach(function(b){m.setAttribute(b,E[b])})}return m.setAttribute("role","slider"),m.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),c===0?ee(m,e.cssClasses.handleLower):c===e.handles-1&&ee(m,e.cssClasses.handleUpper),u.handle=m,u}function Ke(h,c){return c?z(h,e.cssClasses.connect):!1}function Le(h,c){var u=z(c,e.cssClasses.connects);l=[],d=[],d.push(Ke(u,h[0]));for(var m=0;m<e.handles;m++)l.push(ne(c,m)),w[m]=m,d.push(Ke(u,h[m+1]))}function rt(h){ee(h,e.cssClasses.target),e.dir===0?ee(h,e.cssClasses.ltr):ee(h,e.cssClasses.rtl),e.ort===0?ee(h,e.cssClasses.horizontal):ee(h,e.cssClasses.vertical);var c=getComputedStyle(h).direction;return c==="rtl"?ee(h,e.cssClasses.textDirectionRtl):ee(h,e.cssClasses.textDirectionLtr),z(h,e.cssClasses.base)}function K(h,c){return!e.tooltips||!e.tooltips[c]?!1:z(h.firstChild,e.cssClasses.tooltip)}function Ue(){return o.hasAttribute("disabled")}function Je(h){var c=l[h];return c.hasAttribute("disabled")}function ot(h){h!=null?(l[h].setAttribute("disabled",""),l[h].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),l.forEach(function(c){c.handle.removeAttribute("tabindex")}))}function yi(h){h!=null?(l[h].removeAttribute("disabled"),l[h].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),l.forEach(function(c){c.removeAttribute("disabled"),c.handle.setAttribute("tabindex","0")}))}function Fe(){p&&(lt("update"+Ne.tooltips),p.forEach(function(h){h&&Hn(h)}),p=null)}function A(){Fe(),p=l.map(K),Ti("update"+Ne.tooltips,function(h,c,u){if(!(!p||!e.tooltips)&&p[c]!==!1){var m=h[c];e.tooltips[c]!==!0&&(m=e.tooltips[c].to(u[c])),p[c].innerHTML=m}})}function k(){lt("update"+Ne.aria),Ti("update"+Ne.aria,function(h,c,u,m,E){w.forEach(function(b){var T=l[b],S=xt(y,b,0,!0,!0,!0),N=xt(y,b,100,!0,!0,!0),O=E[b],V=String(e.ariaFormat.to(u[b]));S=_.fromStepping(S).toFixed(1),N=_.fromStepping(N).toFixed(1),O=_.fromStepping(O).toFixed(1),T.children[0].setAttribute("aria-valuemin",S),T.children[0].setAttribute("aria-valuemax",N),T.children[0].setAttribute("aria-valuenow",O),T.children[0].setAttribute("aria-valuetext",V)})})}function F(h){if(h.mode===Me.Range||h.mode===Me.Steps)return _.xVal;if(h.mode===Me.Count){if(h.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var c=h.values-1,u=100/c,m=[];c--;)m[c]=c*u;return m.push(100),P(m,h.stepped)}return h.mode===Me.Positions?P(h.values,h.stepped):h.mode===Me.Values?h.stepped?h.values.map(function(E){return _.fromStepping(_.getStep(_.toStepping(E)))}):h.values:[]}function P(h,c){return h.map(function(u){return _.fromStepping(c?_.getStep(u):u)})}function M(h){function c(O,V){return Number((O+V).toFixed(7))}var u=F(h),m={},E=_.xVal[0],b=_.xVal[_.xVal.length-1],T=!1,S=!1,N=0;return u=ko(u.slice().sort(function(O,V){return O-V})),u[0]!==E&&(u.unshift(E),T=!0),u[u.length-1]!==b&&(u.push(b),S=!0),u.forEach(function(O,V){var j,D,J,Z=O,q=u[V+1],G,xi,Pi,Li,Rs,Ri,Is,Ds=h.mode===Me.Steps;for(Ds&&(j=_.xNumSteps[V]),j||(j=q-Z),q===void 0&&(q=Z),j=Math.max(j,1e-7),D=Z;D<=q;D=c(D,j)){for(G=_.toStepping(D),xi=G-N,Rs=xi/(h.density||1),Ri=Math.round(Rs),Is=xi/Ri,J=1;J<=Ri;J+=1)Pi=N+J*Is,m[Pi.toFixed(5)]=[_.fromStepping(Pi),0];Li=u.indexOf(D)>-1?te.LargeValue:Ds?te.SmallValue:te.NoValue,!V&&T&&D!==q&&(Li=0),D===q&&S||(m[G.toFixed(5)]=[D,Li]),N=G}}),m}function Re(h,c,u){var m,E,b=L.createElement("div"),T=(m={},m[te.None]="",m[te.NoValue]=e.cssClasses.valueNormal,m[te.LargeValue]=e.cssClasses.valueLarge,m[te.SmallValue]=e.cssClasses.valueSub,m),S=(E={},E[te.None]="",E[te.NoValue]=e.cssClasses.markerNormal,E[te.LargeValue]=e.cssClasses.markerLarge,E[te.SmallValue]=e.cssClasses.markerSub,E),N=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],O=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];ee(b,e.cssClasses.pips),ee(b,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function V(D,J){var Z=J===e.cssClasses.value,q=Z?N:O,G=Z?T:S;return J+" "+q[e.ort]+" "+G[D]}function j(D,J,Z){if(Z=c?c(J,Z):Z,Z!==te.None){var q=z(b,!1);q.className=V(Z,e.cssClasses.marker),q.style[e.style]=D+"%",Z>te.NoValue&&(q=z(b,!1),q.className=V(Z,e.cssClasses.value),q.setAttribute("data-value",String(J)),q.style[e.style]=D+"%",q.innerHTML=String(u.to(J)))}}return Object.keys(h).forEach(function(D){j(D,h[D][0],h[D][1])}),b}function oe(){v&&(Hn(v),v=null)}function Se(h){oe();var c=M(h),u=h.filter,m=h.format||{to:function(E){return String(Math.round(E))}};return v=o.appendChild(Re(c,u,m)),v}function Ve(){var h=a.getBoundingClientRect(),c="offset"+["Width","Height"][e.ort];return e.ort===0?h.width||a[c]:h.height||a[c]}function Q(h,c,u,m){var E=function(T){var S=ze(T,m.pageOffset,m.target||c);if(!S||Ue()&&!m.doNotReject||Ro(o,e.cssClasses.tap)&&!m.doNotReject||h===s.start&&S.buttons!==void 0&&S.buttons>1||m.hover&&S.buttons)return!1;r||S.preventDefault(),S.calcPoint=S.points[e.ort],u(S,m)},b=[];return h.split(" ").forEach(function(T){c.addEventListener(T,E,r?{passive:!0}:!1),b.push([T,E])}),b}function ze(h,c,u){var m=h.type.indexOf("touch")===0,E=h.type.indexOf("mouse")===0,b=h.type.indexOf("pointer")===0,T=0,S=0;if(h.type.indexOf("MSPointer")===0&&(b=!0),h.type==="mousedown"&&!h.buttons&&!h.touches)return!1;if(m){var N=function(j){var D=j.target;return D===u||u.contains(D)||h.composed&&h.composedPath().shift()===u};if(h.type==="touchstart"){var O=Array.prototype.filter.call(h.touches,N);if(O.length>1)return!1;T=O[0].pageX,S=O[0].pageY}else{var V=Array.prototype.find.call(h.changedTouches,N);if(!V)return!1;T=V.pageX,S=V.pageY}}return c=c||Un(L),(E||b)&&(T=h.clientX+c.x,S=h.clientY+c.y),h.pageOffset=c,h.points=[T,S],h.cursor=E||b,h}function fe(h){var c=h-Po(a,e.ort),u=c*100/Ve();return u=Nn(u),e.dir?100-u:u}function at(h){var c=100,u=!1;return l.forEach(function(m,E){if(!Je(E)){var b=y[E],T=Math.abs(b-h),S=T===100&&c===100,N=T<c,O=T<=c&&h>b;(N||O||S)&&(u=E,c=T)}}),u}function kt(h,c){h.type==="mouseout"&&h.target.nodeName==="HTML"&&h.relatedTarget===null&&wi(h,c)}function vr(h,c){if(navigator.appVersion.indexOf("MSIE 9")===-1&&h.buttons===0&&c.buttonsProperty!==0)return wi(h,c);var u=(e.dir?-1:1)*(h.calcPoint-c.startCalcPoint),m=u*100/c.baseSize;Ts(u>0,m,c.locations,c.handleNumbers,c.connect)}function wi(h,c){c.handle&&(_i(c.handle,e.cssClasses.active),H-=1),c.listeners.forEach(function(u){$.removeEventListener(u[0],u[1])}),H===0&&(_i(o,e.cssClasses.drag),ki(),h.cursor&&(g.style.cursor="",g.removeEventListener("selectstart",On))),e.events.smoothSteps&&(c.handleNumbers.forEach(function(u){je(u,y[u],!0,!0,!1,!1)}),c.handleNumbers.forEach(function(u){X("update",u)})),c.handleNumbers.forEach(function(u){X("change",u),X("set",u),X("end",u)})}function Ci(h,c){if(!c.handleNumbers.some(Je)){var u;if(c.handleNumbers.length===1){var m=l[c.handleNumbers[0]];u=m.children[0],H+=1,ee(u,e.cssClasses.active)}h.stopPropagation();var E=[],b=Q(s.move,$,vr,{target:h.target,handle:u,connect:c.connect,listeners:E,startCalcPoint:h.calcPoint,baseSize:Ve(),pageOffset:h.pageOffset,handleNumbers:c.handleNumbers,buttonsProperty:h.buttons,locations:y.slice()}),T=Q(s.end,$,wi,{target:h.target,handle:u,listeners:E,doNotReject:!0,handleNumbers:c.handleNumbers}),S=Q("mouseout",$,kt,{target:h.target,handle:u,listeners:E,doNotReject:!0,handleNumbers:c.handleNumbers});E.push.apply(E,b.concat(T,S)),h.cursor&&(g.style.cursor=getComputedStyle(h.target).cursor,l.length>1&&ee(o,e.cssClasses.drag),g.addEventListener("selectstart",On,!1)),c.handleNumbers.forEach(function(N){X("start",N)})}}function _r(h){h.stopPropagation();var c=fe(h.calcPoint),u=at(c);u!==!1&&(e.events.snap||Mn(o,e.cssClasses.tap,e.animationDuration),je(u,c,!0,!0),ki(),X("slide",u,!0),X("update",u,!0),e.events.snap?Ci(h,{handleNumbers:[u]}):(X("change",u,!0),X("set",u,!0)))}function br(h){var c=fe(h.calcPoint),u=_.getStep(c),m=_.fromStepping(u);Object.keys(x).forEach(function(E){E.split(".")[0]==="hover"&&x[E].forEach(function(b){b.call(Lt,m)})})}function Er(h,c){if(Ue()||Je(c))return!1;var u=["Left","Right"],m=["Down","Up"],E=["PageDown","PageUp"],b=["Home","End"];e.dir&&!e.ort?u.reverse():e.ort&&!e.dir&&(m.reverse(),E.reverse());var T=h.key.replace("Arrow",""),S=T===E[0],N=T===E[1],O=T===m[0]||T===u[0]||S,V=T===m[1]||T===u[1]||N,j=T===b[0],D=T===b[1];if(!O&&!V&&!j&&!D)return!0;h.preventDefault();var J;if(V||O){var Z=O?0:1,q=Ls(c),G=q[Z];if(G===null)return!1;G===!1&&(G=_.getDefaultStep(y[c],O,e.keyboardDefaultStep)),N||S?G*=e.keyboardPageMultiplier:G*=e.keyboardMultiplier,G=Math.max(G,1e-7),G=(O?-1:1)*G,J=C[c]+G}else D?J=e.spectrum.xVal[e.spectrum.xVal.length-1]:J=e.spectrum.xVal[0];return je(c,_.toStepping(J),!0,!0),X("slide",c),X("update",c),X("change",c),X("set",c),!1}function Sr(h){h.fixed||l.forEach(function(c,u){Q(s.start,c.children[0],Ci,{handleNumbers:[u]})}),h.tap&&Q(s.start,a,_r,{}),h.hover&&Q(s.move,a,br,{hover:!0}),h.drag&&d.forEach(function(c,u){if(!(c===!1||u===0||u===d.length-1)){var m=l[u-1],E=l[u],b=[c],T=[m,E],S=[u-1,u];ee(c,e.cssClasses.draggable),h.fixed&&(b.push(m.children[0]),b.push(E.children[0])),h.dragAll&&(T=l,S=w),b.forEach(function(N){Q(s.start,N,Ci,{handles:T,handleNumbers:S,connect:c})})}})}function Ti(h,c){x[h]=x[h]||[],x[h].push(c),h.split(".")[0]==="update"&&l.forEach(function(u,m){X("update",m)})}function yr(h){return h===Ne.aria||h===Ne.tooltips}function lt(h){var c=h&&h.split(".")[0],u=c?h.substring(c.length):h;Object.keys(x).forEach(function(m){var E=m.split(".")[0],b=m.substring(E.length);(!c||c===E)&&(!u||u===b)&&(!yr(b)||u===b)&&delete x[m]})}function X(h,c,u){Object.keys(x).forEach(function(m){var E=m.split(".")[0];h===E&&x[m].forEach(function(b){b.call(Lt,C.map(e.format.to),c,C.slice(),u||!1,y.slice(),Lt)})})}function xt(h,c,u,m,E,b,T){var S;return l.length>1&&!e.events.unconstrained&&(m&&c>0&&(S=_.getAbsoluteDistance(h[c-1],e.margin,!1),u=Math.max(u,S)),E&&c<l.length-1&&(S=_.getAbsoluteDistance(h[c+1],e.margin,!0),u=Math.min(u,S))),l.length>1&&e.limit&&(m&&c>0&&(S=_.getAbsoluteDistance(h[c-1],e.limit,!1),u=Math.min(u,S)),E&&c<l.length-1&&(S=_.getAbsoluteDistance(h[c+1],e.limit,!0),u=Math.max(u,S))),e.padding&&(c===0&&(S=_.getAbsoluteDistance(0,e.padding[0],!1),u=Math.max(u,S)),c===l.length-1&&(S=_.getAbsoluteDistance(100,e.padding[1],!0),u=Math.min(u,S))),T||(u=_.getStep(u)),u=Nn(u),u===h[c]&&!b?!1:u}function Ai(h,c){var u=e.ort;return(u?c:h)+", "+(u?h:c)}function Ts(h,c,u,m,E){var b=u.slice(),T=m[0],S=e.events.smoothSteps,N=[!h,h],O=[h,!h];m=m.slice(),h&&m.reverse(),m.length>1?m.forEach(function(j,D){var J=xt(b,j,b[j]+c,N[D],O[D],!1,S);J===!1?c=0:(c=J-b[j],b[j]=J)}):N=O=[!0];var V=!1;m.forEach(function(j,D){V=je(j,u[j]+c,N[D],O[D],!1,S)||V}),V&&(m.forEach(function(j){X("update",j),X("slide",j)}),E!=null&&X("drag",T))}function As(h,c){return e.dir?100-h-c:h}function wr(h,c){y[h]=c,C[h]=_.fromStepping(c);var u=As(c,0)-R,m="translate("+Ai(u+"%","0")+")";l[h].style[e.transformRule]=m,ks(h),ks(h+1)}function ki(){w.forEach(function(h){var c=y[h]>50?-1:1,u=3+(l.length+c*h);l[h].style.zIndex=String(u)})}function je(h,c,u,m,E,b){return E||(c=xt(y,h,c,u,m,!1,b)),c===!1?!1:(wr(h,c),!0)}function ks(h){if(!!d[h]){var c=0,u=100;h!==0&&(c=y[h-1]),h!==d.length-1&&(u=y[h]);var m=u-c,E="translate("+Ai(As(c,m)+"%","0")+")",b="scale("+Ai(m/100,"1")+")";d[h].style[e.transformRule]=E+" "+b}}function xs(h,c){return h===null||h===!1||h===void 0||(typeof h=="number"&&(h=String(h)),h=e.format.from(h),h!==!1&&(h=_.toStepping(h)),h===!1||isNaN(h))?y[c]:h}function Pt(h,c,u){var m=vi(h),E=y[0]===void 0;c=c===void 0?!0:c,e.animate&&!E&&Mn(o,e.cssClasses.tap,e.animationDuration),w.forEach(function(S){je(S,xs(m[S],S),!0,!1,u)});var b=w.length===1?0:1;if(E&&_.hasNoSize()&&(u=!0,y[0]=0,w.length>1)){var T=100/(w.length-1);w.forEach(function(S){y[S]=S*T})}for(;b<w.length;++b)w.forEach(function(S){je(S,y[S],!0,!0,u)});ki(),w.forEach(function(S){X("update",S),m[S]!==null&&c&&X("set",S)})}function Cr(h){Pt(e.start,h)}function Tr(h,c,u,m){if(h=Number(h),!(h>=0&&h<w.length))throw new Error("noUiSlider: invalid handle number, got: "+h);je(h,xs(c,h),!0,!0,m),X("update",h),u&&X("set",h)}function Ps(h){if(h===void 0&&(h=!1),h)return C.length===1?C[0]:C.slice(0);var c=C.map(e.format.to);return c.length===1?c[0]:c}function Ar(){for(lt(Ne.aria),lt(Ne.tooltips),Object.keys(e.cssClasses).forEach(function(h){_i(o,e.cssClasses[h])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function Ls(h){var c=y[h],u=_.getNearbySteps(c),m=C[h],E=u.thisStep.step,b=null;if(e.snap)return[m-u.stepBefore.startValue||null,u.stepAfter.startValue-m||null];E!==!1&&m+E>u.stepAfter.startValue&&(E=u.stepAfter.startValue-m),m>u.thisStep.startValue?b=u.thisStep.step:u.stepBefore.step===!1?b=!1:b=m-u.stepBefore.highestStep,c===100?E=null:c===0&&(b=null);var T=_.countStepDecimals();return E!==null&&E!==!1&&(E=Number(E.toFixed(T))),b!==null&&b!==!1&&(b=Number(b.toFixed(T))),[b,E]}function kr(){return w.map(Ls)}function xr(h,c){var u=Ps(),m=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];m.forEach(function(b){h[b]!==void 0&&(t[b]=h[b])});var E=$n(t);m.forEach(function(b){h[b]!==void 0&&(e[b]=E[b])}),_=E.spectrum,e.margin=E.margin,e.limit=E.limit,e.padding=E.padding,e.pips?Se(e.pips):oe(),e.tooltips?A():Fe(),y=[],Pt(vs(h.start)?h.start:u,c)}function Pr(){a=rt(o),Le(e.connect,a),Sr(e.events),Pt(e.start),e.pips&&Se(e.pips),e.tooltips&&A(),k()}Pr();var Lt={destroy:Ar,steps:kr,on:Ti,off:lt,get:Ps,set:Pt,setHandle:Tr,reset:Cr,disable:ot,enable:yi,__moveHandles:function(h,c,u){Ts(h,c,y,u)},options:t,updateOptions:xr,target:o,removePips:oe,removeTooltips:Fe,getPositions:function(){return y.slice()},getTooltips:function(){return p},getOrigins:function(){return l},pips:Se};return Lt}function ca(i,e){if(!i||!i.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+i);if(i.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var t=$n(e),s=ha(i,t,e);return i.noUiSlider=s,s}var Xn={__spectrum:Fn,cssClasses:jn,create:ca};function Wn(i){return i.filter((e,t)=>i.indexOf(e)===t)}function Kn(i){let e={};return{to(t){let s=i.format(t);return e[s]=t,s},from(t){return e[t]}}}function Es(i,e){let{min:t,max:s,from:n,to:r}=i;return t=parseFloat(t),s=parseFloat(s),t===s&&s++,n=parseFloat(n)||t,r=parseFloat(r)||s,{range:{min:t,max:s},start:[e.to(n),e.to(r)]}}function Jn(i,e,t,s={}){return Xn.create(i,U({cssPrefix:"dfd-slider-",orientation:"horizontal",direction:s.rtl?"rtl":"ltr",tooltips:!0,padding:0,connect:!0,animate:!0,step:1,keyboardSupport:!0,format:e,pips:{mode:"count",values:3,density:6,format:e}},t))}function zn(i,e,t){let s=getComputedStyle(i).direction==="rtl",n=i.noUiSlider.options.direction==="rtl",r=i.noUiSlider.options.orientation==="vertical",a=i.noUiSlider.getTooltips().map(d=>d.cloneNode(!0)),l=i.noUiSlider.getOrigins();a.forEach(function(d,v){d&&l[v].appendChild(d)}),i.noUiSlider.on("update",function(d,v,p,_,C){let y=[[]],w=[[]],H=[[]],x=0;a[0]&&(y[0][0]=0,w[0][0]=C[0],H[0][0]=d[0]);for(let L=1;L<C.length;L++)(!a[L]||C[L]-C[L-1]>e)&&(x++,y[x]=[],H[x]=[],w[x]=[]),a[L]&&(y[x].push(L),H[x].push(d[L]),w[x].push(C[L]));y.forEach(function(L,$){let g=L.length;for(let R=0;R<g;R++){let z=L[R];if(R===g-1){let ne=0;w[$].forEach(function(K){ne+=1e3-K});let Ke=r?"bottom":"right",Le=n?0:g-1,rt=1e3-w[$][Le];ne=(s&&!r?100:0)+ne/g-rt,a[z].innerHTML=Wn(H[$]).join(t),a[z].style.display="block",a[z].style[Ke]=ne+"%"}else a[z].style.display="none"}})})}"use strict";var qn={mounted(){let{index:i,facet:e,language:t,currency:s,currencyDecimal:n,currencyFormat:r,currencyPrecision:o,currencySymbol:a,currencyThousand:l,decimalPrecision:d,min:v,max:p,from:_,to:C}=this.el.dataset,y=this.el.dataset.autohideTooltips==="true",w=this.options.numberingSystem||"latn",H=(document.documentElement.getAttribute("dir")||"").toLowerCase()==="rtl",x=(()=>typeof r=="string"?new gs(r,a,l,n,parseInt(o,10)):s?pi(t,s,parseInt(o,10),w):mi(t,parseInt(d,10),w))();this.format=Kn(x),this.slider=Jn(this.el,this.format,Es({min:v,max:p,from:_,to:C},this.format),{rtl:H}),this.slider.on("change",L=>{let[$,g]=L;this.pushEvent("filter",{index:i,range:{[e]:{from:this.format.from($),to:this.format.from(g)}}})}),y||zn(this.el,25," - ")},updated(){let{min:i,max:e,from:t,to:s}=this.el.dataset;this.slider.updateOptions(Es({min:i,max:e,from:t,to:s},this.format))},destroyed(){this.el.noUiSlider.destroy()}};"use strict";var Gn={mounted(){let i=0,e=0;this.el.addEventListener("touchstart",t=>{i=t.changedTouches[0].screenY},!1),this.el.addEventListener("touchend",t=>{e=t.changedTouches[0].screenY,e>i&&this.pushEvent(this.el.dataset.action,{index:""})},!1)}};var bi=window.SpeechRecognition||window.webkitSpeechRecognition||null,Yn=["click"],Qn=["start","end","error","result"],da="voice-search",Zn="voice-status-change";function ua(i){return i.results.length>0?i.results[0][0].transcript:null}var er={mounted(){!bi||(this.recording=!1,this.driver=new bi,this.driver.continuous=!1,this.driver.interimResults=!1,this.handleVoiceEvent=i=>{switch(i.type){case"end":case"error":this.driver.stop(),this.recording=!1,this.pushEvent(Zn,{recording:!1});break;case"click":this.driver[this.recording?"stop":"start"](),this.recording=!this.recording,this.pushEvent(Zn,{recording:this.recording});break;case"result":let e=ua(i);e&&this.pushEvent(da,{query:e});break}},Yn.forEach(i=>this.el.addEventListener(i,this.handleVoiceEvent)),Qn.forEach(i=>this.driver.addEventListener(i,this.handleVoiceEvent)))},destroyed(){Yn.forEach(i=>this.el.removeEventListener(i,this.handleVoiceEvent)),Qn.forEach(i=>this.driver.removeEventListener(i,this.handleVoiceEvent)),this.driver=null}};function Ee(i,e,...t){var o;let s=((o=t.find(a=>!!a.options))==null?void 0:o.options)||{},n={get tag(){return e},get options(){return s},debug(...a){ue(`[hook][${i}]`,...a)}};return["mounted","beforeUpdate","updated","destroyed","disconnected","reconnected"].forEach(a=>{let l=t.map(d=>d[a]).filter(d=>!!d);n[a]=function(){l.length>0&&this.debug(`${a}()`),l.forEach(d=>d.call(this))}}),n}function tr(i){return JSON.parse(JSON.stringify(i))}function Ss(i,e,t){let s=t.x,n=s+t.width,r=t.y,o=r+t.height;return i>=s&&i<=n&&e>=r&&e<=o}function ir(i){return En("__DF_LAYER_SERVER__")||`https://${i.toLowerCase()}-layer.doofinder.com`}function sr(){var i;if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("msMaxTouchPoints"in navigator)return navigator.msMaxTouchPoints>0;{let e=(i=window.matchMedia)==null?void 0:i.call(window,"(pointer:coarse)");if((e==null?void 0:e.media)==="(pointer:coarse)")return!!e.matches;if("orientation"in window)return!0;{let t=navigator.userAgent;return/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}}}var nr=(i,e,t)=>{e.forEach(s=>{i.addEventListener(s,t)})},rr=(i,e,t)=>{e.forEach(s=>{i.removeEventListener(s,t)})},ys=class{constructor(e){this.defaults={idle:1e4,events:["mousemove","scroll","keydown","mousedown","touchstart"],onIdle:null,onActive:null,onHide:null,onShow:null,keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign({},this.defaults,e),this.visibilityEvents=["visibilitychange","webkitvisibilitychange","mozvisibilitychange","msvisibilitychange"],this.clearTimeout=null,this.reset(),this.stopListener=t=>{this.stop()},this.idlenessEventsHandler=t=>{this.idle&&(this.idle=!1,this.settings.onActive&&this.settings.onActive.call()),this.resetTimeout(this.settings)},this.visibilityEventsHandler=t=>{document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?this.visible&&(this.visible=!1,this.settings.onHide&&this.settings.onHide.call()):this.visible||(this.visible=!0,this.settings.onShow&&this.settings.onShow.call())}}resetTimeout(e,t=this.settings.keepTracking){this.clearTimeout&&(this.clearTimeout(),this.clearTimeout=null),t&&this.timeout(this.settings)}timeout(e){var t=this.settings.recurIdleCall?{set:setInterval.bind(window),clear:clearInterval.bind(window)}:{set:setTimeout.bind(window),clear:clearTimeout.bind(window)},s=t.set(function(){this.idle=!0,this.settings.onIdle&&this.settings.onIdle.call()}.bind(this),this.settings.idle);this.clearTimeout=()=>t.clear(s)}start(){return window.addEventListener("idle:stop",this.stopListener),this.timeout(this.settings),nr(window,this.settings.events,this.idlenessEventsHandler),(this.settings.onShow||this.settings.onHide)&&nr(document,this.visibilityEvents,this.visibilityEventsHandler),this}stop(){return window.removeEventListener("idle:stop",this.stopListener),rr(window,this.settings.events,this.idlenessEventsHandler),this.resetTimeout(this.settings,!1),(this.settings.onShow||this.settings.onHide)&&rr(document,this.visibilityEvents,this.visibilityEventsHandler),this}reset({idle:e=this.settings.startAtIdle,visible:t=!this.settings.startAtIdle}={}){return this.idle=e,this.visible=t,this}throwOnBadKey(e,t){e.forEach(function(s){if(!t.includes(s))throw`set: Unknown key ${s}`})}set(e){this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign(this.settings,e)}};var fa=0,pa=0;function or(i,e){return lr(class extends i{constructor(t,s,n={}){super(t,s,n);this.params=hr(n.params||{},e)}},`DoofinderLiveSocket_${++fa}`)}function ar(i,e){return lr(class extends i{constructor(t,s={}){super(t,s);this.params=hr(s.params||{},e),this.preventReconnect=!1,this.shouldReconnect=!1,this.idleMonitor=new ys({idle:3*60*1e3,onActive:this.onShowOrActive.bind(this),onShow:this.onShowOrActive.bind(this)}),this.idleMonitor.start()}onShowOrActive(){this.shouldReconnect&&this.idleMonitor.visible&&!this.idleMonitor.idle&&(this.shouldReconnect=!1,this.reconnectTimer.scheduleTimeout())}onConnClose(t){this.hasLogger()&&this.log("transport","close",t),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.preventReconnect||(this.closeWasClean?this.idleMonitor.stop():this.scheduleReconnect()),this.stateChangeCallbacks.close.forEach(([,s])=>s(t))}scheduleReconnect(){!this.idleMonitor.idle&&this.idleMonitor.visible?this.reconnectTimer.scheduleTimeout():(this.reconnectTimer.reset(),this.shouldReconnect=!0)}},`DoofinderSocket_${++pa}`)}function lr(i,e){return Object.defineProperty(i,"name",{value:e}),i}function hr(i,e){let t=typeof e=="function",s=typeof i=="function";return t?function(){return e(s?i():i)}:s?i:function(){return i}}function cr(i){let e=document.cookie.match(new RegExp("(?:^|; )"+i.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));if(e)return decodeURIComponent(e[1])}function dr(i,e,t={}){t=U({path:"/",samesite:"strict"},t);let s=encodeURIComponent(i)+"="+encodeURIComponent(e);for(let n in t){s+="; "+n;let r=t[n];r!==!0&&(s+="="+r)}document.cookie=s}function ur(i){return`${i}.session`}function fr(i){if(i instanceof PointerEvent)switch(i.pointerType){case"mouse":case"pen":case"touch":return!0;default:return!1}else if(i instanceof MouseEvent){let{pageX:e,pageY:t,target:s}=i;return!(e===t&&e===0&&ma(s))}return!1}function ma(i){return i.getAttribute("type")==="submit"&&(i.tagName==="BUTTON"||i.tagName==="INPUT")}var ga="Search",pr=sr(),mr="latestSearches",va="dfd-root",gr="dfdTarget",_a=24*60*60,ws="transientState",Ei=class{constructor(e){this.__handleTriggerEvent__=this.__handleTriggerEvent__.bind(this),this.__handlePopstate__=this.__handlePopstate__.bind(this),this.__handleLinkClick__=this.__handleLinkClick__.bind(this),this.__handleDocumentClick__=this.__handleDocumentClick__.bind(this),this.__handleDocumentKeyup__=this.__handleDocumentKeyup__.bind(this),this.__updateSocketParams__=this.__updateSocketParams__.bind(this);let{id:t,installationId:s,zone:n,language:r,currency:o,hashid:a,trigger:l,autoload:d,urlHash:v,googleAnalytics:p}=e;this._installationId=s,this._zone=n,this._hashid=a,this._language=r,this._currency=o,this._mount=this.__createMount__(t),this._mount.addEventListener("click",this.__handleLinkClick__),this._eventBus=new rs(this._mount),this._eventBusSubscriptions=[hs,Ct,Tt,cs].map(_=>this._eventBus.on(_,this.__handleTriggerEvent__)),this._trigger=l,this._trigger.setEventBus(this._eventBus),this._display=new ns(this._mount),this._state=new as({installationId:s,autoload:d,urlHash:v}),this._data=new Qt(`${s}.data`),this._sessionData=new Qt(`${s}.data`,window.sessionStorage),this._params=this.__buildSocketParams__(e),this._hooks=this.__buildSocketHooks__(e),this.Socket=ar(Ns,this.__updateSocketParams__),this.LiveSocket=or(wt,this.__updateSocketParams__),this._liveSocket=null,this._liveSocketConnectedPromise=new nt,this._googleAnalyticsOptions=this.__initGoogleAnalyticsOptions__(p),this._theme=null,this._layerHook=null,this.closable&&this.mount.classList.add("dfd-closable"),window.addEventListener("popstate",this.__handlePopstate__),this._trigger.flushMessages(),this.__loadState__().then(()=>this.dispatch("doofinder.ready"))}__createMount__(e){let t=document.createElement("div");return t.id=e||`df-${si(32)}`,t.dataset.dfdView=ga,t.setAttribute(Pe,""),t.classList.add(va),Object.defineProperty(t,"doofinderTag",{value:this,writable:!1}),t}get mount(){return this._mount}get trigger(){return this._trigger}get display(){return this._display}get hashid(){return this._hashid}get installationId(){return this._installationId}get zone(){return this._zone}get language(){return this._language}get currency(){return this._currency}get sessionKey(){return ur(this._installationId)}get sessionId(){let e=cr(this.sessionKey);return e||null}get data(){return this._data}get state(){return this._state}get layerHook(){return this._layerHook||(this._layerHook=this.getHooksByName("Layer").pop()),this._layerHook}get googleAnalyticsOptions(){return this._googleAnalyticsOptions}get closable(){return this.display.type!==Xe||!this.state.hasQueryParam}enableDebug(){return this._liveSocket?(this._liveSocket.enableDebug(),!0):!1}debug(...e){ue("[tag]",...e)}saveTransientState(e){this._sessionData.setItem(ws,e)}__popTransientState__(){let e=this._sessionData.getItem(ws)||null;return this._sessionData.removeItem(ws),e}__handleTriggerEvent__(e){let{source:t,query:s,originalEvent:n}=e.detail,r=s?{query:s}:{};this.connect(r).then(()=>{this.__shouldDisplay__(e)?(this.show(t),e.type===Tt&&this.search(s)):e.type===cs&&this.submit(s,o=>{var l;if(!o)return;let{submit:a}=o||{};a&&((l=n==null?void 0:n.target.closest("form"))==null||l.submit())})})}__shouldDisplay__(e){let{query:t}=e.detail;switch(this._display.type){case Zt:return(e.type===Tt||e.type===Ct)&&(this._display.screenType==="classic-initial"||!!t);case Xe:return(e.type===Tt||e.type===Ct)&&!!t;case ei:return e.type===hs||e.type===Ct;default:return!1}}__handlePopstate__(e){this._liveSocket?this._state.validEvent(e)?this.__changeState__(e.state):this.disconnect():this.__loadState__()}__changeState__(e){this.layerHook?this.layerHook.pushEvent("change-state",e):this.debug("tried to change state but hook did not exist:",e)}__handleLinkClick__(e){if(e.target.href){let t=e.target.closest("[dfd-value-dfid]"),s=t==null?void 0:t.getAttribute("dfd-value-dfid");s&&this._sessionData.setItem(gr,s),this._liveSocket.socket.preventReconnect=!0,this.saveTransientState(this._state.get())}else this._liveSocket.socket.preventReconnect=!1}popTargetItemId(){return this._sessionData.popItem(gr)}__handleDocumentClick__(e){if(this._display.type===Xe||!fr(e))return;let{clientX:t,clientY:s}=e;if(Ss(t,s,this._mount.getBoundingClientRect()))return;let n=this._display.method.positionReference;!!n&&(Ss(t,s,n.getBoundingClientRect())||e.target.closest('button[type="submit"]')&&e.target.closest("form")===n.closest("form"))||this.close()}__handleDocumentKeyup__(e){e.key==="Escape"&&this.close()}__loadState__(){let e=this._state.get();return e?this.connect({state:e}).then(()=>this.show()):Promise.resolve()}getLatestSearches(){return this._data.getItem(mr)||[]}updateLatestSearches(e){this._data.setItem(mr,e)}onLoad(e){let{session_id:t,min_capture_length:s,capture_submit:n,align:r,display_type:o,insertion_point:a,insertion_method:l,screen_type:d,theme:v}=e;this.__updateSession__({session_id:t}),this.__updateTrigger__({min_capture_length:s,capture_submit:n}),this.__updateDisplay__({display_type:o,insertion_point:a,insertion_method:l,screen_type:d,theme:v,align:r}),this._liveSocketConnectedPromise.resolve(e)}__updateSession__({session_id:e}){e&&e!==this.sessionId&&dr(this.sessionKey,e,{"max-age":_a})}__updateTrigger__({min_capture_length:e,capture_submit:t}){this._trigger.setCaptureLength(e),this._trigger.captureSubmit=t}__updateDisplay__({display_type:e,insertion_point:t,insertion_method:s,screen_type:n,theme:r,align:o}){this._display.setType(e,{placement:{insertionPoint:t,insertionMethod:s},align:o}),this._display.screenType=n,this._display.updateTheme(r),this._display.hidden||this.updatePosition()}updatePosition(e){return I(this,null,function*(){this._display.updatePosition({positionReference:e||(yield this._trigger.getElement())})})}close(){var e,t;this.closable&&((t=(e=this.getHooksByName("Layer"))==null?void 0:e.pop())==null||t.close())}show(e){return I(this,null,function*(){yield this.updatePosition(e),yield this._display.show(),this.dispatch("doofinder.show")})}hide(){return I(this,null,function*(){yield this._display.hide(),this.dispatch("doofinder.hide")})}dispatch(e,t={}){let s=ye(U({},t),{tag:this});document.dispatchEvent(new CustomEvent(e,{detail:s}))}connect(e){if(!this._liveSocket){let s=`${ir(this._zone).replace(/^http/,"ws")}/layer/${hi}`,n=U(ye(U({},tr(this._params)),{zone:this.zone,installation_id:this.installationId,language:this.language,currency:this.currency,session_id:this.sessionId,latest_searches:this.getLatestSearches(),voice_supported:!!bi,google_analytics:this.googleAnalyticsOptions}),e),r=this.__popTransientState__();r&&!n.state&&(n.state=r),this.debug(`creating live socket for layer: ${this._mount.id}`,n),this._liveSocket=new this.LiveSocket(s,this.Socket,{params:n,hooks:this._hooks,doofinderMount:this._mount,disconnectCallback:()=>{this.__afterDisconnect__(),this.hide(),this.debug("layer died and can't reconnect automatically! \u{1F92C}")},metadata:{click:(o,a)=>({keys:{altKey:o.altKey,shiftKey:o.shiftKey,ctrlKey:o.ctrlKey,metaKey:o.metaKey}})}}),this._liveSocket.connect(),document.addEventListener("click",this.__handleDocumentClick__),document.addEventListener("keyup",this.__handleDocumentKeyup__,{passive:!0})}return this._liveSocketConnectedPromise}open(){return I(this,arguments,function*(e={}){let{search:t,screen:s}=e,n=U({},e);t!=null&&!s&&(n.screen="fallback"),typeof t=="string"&&(delete n.search,n.query=t),yield this.connect(n),yield this.show(),typeof t=="object"&&this.search(t)})}__afterDisconnect__(){this._liveSocket&&this._liveSocket.destroyAllViews(),this._layerHook=null,this._liveSocket=null,this.dispatch("doofinder.disconnect")}disconnect(){var e;this.debug(`disconnecting from live socket: ${this._mount.id}`),(e=this._liveSocket)==null||e.disconnect(()=>{this.__afterDisconnect__(),this.hide(),document.removeEventListener("keyup",this.__handleDocumentKeyup__),document.removeEventListener("click",this.__handleDocumentClick__)}),this._liveSocketConnectedPromise=new nt}destroy(){return I(this,null,function*(){var e;this.debug(`destroy: ${this._mount.id}`),(e=this._liveSocket)==null||e.disconnect(),this._liveSocket=null,this._eventBusSubscriptions.forEach(t=>t()),this._eventBusSubscriptions=null,this._eventBus=null,yield this._display.destroy(),this._display=null,window.removeEventListener("popstate",this.__handlePopstate__),document.removeEventListener("keyup",this.__handleDocumentKeyup__),document.removeEventListener("click",this.__handleDocumentClick__),this.dispatch("doofinder.destroy"),this._trigger.destroy()})}getHooksByName(e){if(this._liveSocket){let t=this._liveSocket.getViewByEl(this._mount);return Array.from(this._mount.querySelectorAll(`[dfd-hook="${e}"]`)).map(n=>t.getHook(n))}else return[]}search(e,t){var n;let s=typeof e=="string"?{query:e}:e;(n=this.layerHook)==null||n.pushEvent("search-suggest",{search:s},t)}changeLocale(e,t,s){var n;(n=this.layerHook)==null||n.pushEvent("change-locale",{language:e,currency:t},s)}submit(e,t){var s;(s=this.layerHook)==null||s.pushEvent("search-submit",{search:{query:e}},t)}__buildSocketParams__(e){let{params:t,vars:s,indices:n,state:r}=e,o={hashid:this._hashid,origin:window.location.hostname,indices:n,params:t,vars:s,state:r};return["indices","search-server"].filter(a=>!o[a]).forEach(a=>delete o[a]),o}__buildSocketHooks__(e){let t=e.hooks||{},s={Carousel:Ee("Carousel",this,Sn,t.Carousel||{}),ImageSearch:Ee("ImageSearch",this,wn),Input:Ee("Input",this,Cn,t.Input||{}),Layer:Ee("Layer",this,Tn,t.Layer||{}),EmbeddedResults:Ee("EmbeddedResults",this,ms,pr?ps:{},t.EmbeddedResults||{}),Results:Ee("Results",this,Dn,pr?ps:{},ms,t.Results||{}),Slider:Ee("Slider",this,qn,t.Slider||{}),Swipe:Ee("Swipe",this,Gn,t.Swipe||{}),VoiceSearch:Ee("VoiceSearch",this,er,t.VoiceSearch||{})};return ue("[tag] Hooks created:",this._mount.id,s),Object.keys(t).filter(n=>!s[n]).forEach(n=>{s[n]=Ee(n,this,t[n]||{})}),s}__updateSocketParams__(e){let t=this._state.get(),s=ye(U({},e),{installation_id:this._installationId,session_id:this.sessionId,language:this._language,currency:this._currency});return t&&(s.state=t),s}__initGoogleAnalyticsOptions__(e){let{account:t,trackPageView:s}=e||{};return t?{account:t,track_page_view:!!s}:null}};var Si=[];document.addEventListener("doofinder.destroy",i=>{Si=Si.filter(e=>e!==i.detail)});var Cs={getTags(){return Si.slice(0)},create(i){let e=new Ei(i);return Si.push(e),e},destroy(i){var e;i instanceof Ei?i.destroy():(e=i==null?void 0:i.doofinderTag)==null||e.destroy()},enableDebug:_n,disableDebug:bn,debug:ue,utils:{buildNumericFormatter:mi,buildCurrencyFormatter:pi}};Object.defineProperty(Cs,"__version__",{value:hi});document.dispatchEvent(new CustomEvent("doofinder.hello",{detail:Cs}));window.doofinder=Cs;})();
